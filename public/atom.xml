<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Jacobä¸ªäººæŠ€æœ¯åšå®¢</title>
  
  <subtitle>Python is cool!</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.breakering.com/"/>
  <updated>2019-03-01T09:27:33.591Z</updated>
  <id>http://blog.breakering.com/</id>
  
  <author>
    <name>Jacob</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Markdownå¥‡æ·«æŠ€å·§</title>
    <link href="http://blog.breakering.com/2019/03/01/markdown-tips/"/>
    <id>http://blog.breakering.com/2019/03/01/markdown-tips/</id>
    <published>2019-03-01T09:26:11.000Z</published>
    <updated>2019-03-01T09:27:33.591Z</updated>
    
    <content type="html"><![CDATA[<p>Markdownçš„åŸºç¡€è¯­æ³•è¿™é‡Œå°±ä¸ä»‹ç»äº†ï¼Œæ¯”è¾ƒç®€å•ï¼Œä¸‹é¢ä»‹ç»çš„éƒ½æ˜¯äº›èƒ½ç©å‡ºèŠ±æ ·çš„å°æŠ€å·§ã€‚</p><blockquote><p>psï¼šå¦‚ä¸‹æŠ€å·§å¤§å¤šæ˜¯åˆ©ç”¨ Markdown å…¼å®¹éƒ¨åˆ† HTML æ ‡ç­¾çš„ç‰¹æ€§æ¥å®Œæˆï¼Œä¸ä¸€å®šåœ¨æ‰€æœ‰ç½‘ç«™å’Œè½¯ä»¶é‡Œéƒ½å®Œå…¨æ”¯æŒï¼Œä¸»è¦ä»¥ GitHub æ”¯æŒä¸ºå‡†ã€‚</p></blockquote><h2 id="ç›®å½•è‡ªåŠ¨ç”Ÿæˆ">ç›®å½•è‡ªåŠ¨ç”Ÿæˆ</h2><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[TOC]</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹æ•ˆæœ:</p><p>[TOC]</p><h2 id="åœ¨è¡¨æ ¼å•å…ƒæ ¼é‡Œæ¢è¡Œ">åœ¨è¡¨æ ¼å•å…ƒæ ¼é‡Œæ¢è¡Œ</h2><p>å€ŸåŠ©äº HTML é‡Œçš„ <code>&lt;br /&gt;</code> å®ç°ã€‚</p><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">| Header1 | Header2                          |</span><br><span class="line">|---------|----------------------------------|</span><br><span class="line">| item 1  | 1. one&lt;br/&gt;2. two&lt;br/&gt;3. three |</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹æ•ˆæœï¼š</p><table><thead><tr><th>Header1</th><th>Header2</th></tr></thead><tbody><tr><td>item 1</td><td>1. one<br>2. two<br>3. three</td></tr></tbody></table><h2 id="æ§åˆ¶å›¾ç‰‡å¤§å°å’Œä½ç½®">æ§åˆ¶å›¾ç‰‡å¤§å°å’Œä½ç½®</h2><p>æ ‡å‡†çš„ Markdown å›¾ç‰‡æ ‡è®° <code>![]()</code> æ— æ³•æŒ‡å®šå›¾ç‰‡çš„å¤§å°å’Œä½ç½®ï¼Œåªèƒ½ä¾èµ–é»˜è®¤çš„å›¾ç‰‡å¤§å°ï¼Œé»˜è®¤å±…å·¦ã€‚</p><p>è€Œæœ‰æ—¶å€™æºå›¾å¤ªå¤§æƒ³è¦ç¼©å°ä¸€ç‚¹ï¼Œæˆ–è€…æƒ³å°†å›¾ç‰‡å±…ä¸­ï¼Œå°±ä»éœ€è¦å€ŸåŠ© HTML çš„æ ‡ç­¾æ¥å®ç°äº†ã€‚å›¾ç‰‡å±…ä¸­å¯ä»¥ä½¿ç”¨ <code>&lt;div&gt;</code> æ ‡ç­¾åŠ  <code>align</code> å±æ€§æ¥æ§åˆ¶ï¼Œå›¾ç‰‡å®½é«˜åˆ™ç”¨ <code>width</code> å’Œ <code>height</code> æ¥æ§åˆ¶ã€‚</p><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">**å›¾ç‰‡é»˜è®¤æ˜¾ç¤ºæ•ˆæœï¼š**</span><br><span class="line"></span><br><span class="line">![](http://blog.breakering.com/images/avatar/Breakering.jpg)</span><br><span class="line"></span><br><span class="line">**åŠ ä»¥æ§åˆ¶åçš„æ•ˆæœï¼š**</span><br><span class="line"></span><br><span class="line">&lt;div align=&quot;left&quot;&gt;&lt;img width=&quot;65&quot; height=&quot;75&quot; src=&quot;http://blog.breakering.com/images/avatar/Breakering.jpg&quot;/&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹æ•ˆæœï¼š</p><p><strong>å›¾ç‰‡é»˜è®¤æ˜¾ç¤ºæ•ˆæœï¼š</strong></p><p><img src="http://blog.breakering.com/images/avatar/Breakering.jpg" alt=""></p><p><strong>åŠ ä»¥æ§åˆ¶åçš„æ•ˆæœï¼š</strong></p><div align="left"><img width="90" height="75" src="http://blog.breakering.com/images/avatar/Breakering.jpg"></div><h2 id="ä½¿ç”¨-emoji">ä½¿ç”¨ Emoji</h2><p>è¿™ä¸ªæ˜¯ GitHub å¯¹æ ‡å‡† Markdown æ ‡è®°ä¹‹å¤–çš„æ‰©å±•äº†ï¼Œç”¨å¾—å¥½èƒ½è®©æ–‡å­—ç”ŸåŠ¨ä¸€äº›ã€‚</p><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æˆ‘å’Œæˆ‘çš„å°ä¼™ä¼´ä»¬éƒ½ç¬‘äº†ã€‚:smile:</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹æ•ˆæœï¼š</p><p>æˆ‘å’Œæˆ‘çš„å°ä¼™ä¼´ä»¬éƒ½ç¬‘äº†ã€‚ğŸ˜„</p><p>æ›´å¤šå¯ç”¨ Emoji ä»£ç å‚è§ <a href="https://www.webpagefx.com/tools/emoji-cheat-sheet/" target="_blank" rel="noopener">https://www.webpagefx.com/tools/emoji-cheat-sheet/</a>ã€‚</p><h2 id="è¡Œé¦–ç¼©è¿›">è¡Œé¦–ç¼©è¿›</h2><p>ç›´æ¥åœ¨ Markdown é‡Œç”¨ç©ºæ ¼å’Œ Tab é”®ç¼©è¿›åœ¨æ¸²æŸ“åä¼šè¢«å¿½ç•¥æ‰ï¼Œéœ€è¦å€ŸåŠ© HTML è½¬ä¹‰å­—ç¬¦åœ¨è¡Œé¦–æ·»åŠ ç©ºæ ¼æ¥å®ç°ï¼Œ<code>&amp;ensp;</code> ä»£è¡¨åŠè§’ç©ºæ ¼ï¼Œ<code>&amp;emsp;</code> ä»£è¡¨å…¨è§’ç©ºæ ¼ã€‚</p><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;emsp;&amp;emsp;æ˜¥å¤©æ¥äº†ï¼Œåˆåˆ°äº†ä¸‡ç‰©å¤è‹çš„å­£èŠ‚ã€‚</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹æ•ˆæœï¼š</p><p>â€ƒâ€ƒæ˜¥å¤©æ¥äº†ï¼Œåˆåˆ°äº†ä¸‡ç‰©å¤è‹çš„å­£èŠ‚ã€‚</p><h2 id="å±•ç¤ºæ•°å­¦å…¬å¼">å±•ç¤ºæ•°å­¦å…¬å¼</h2><p>å¦‚æœæ˜¯åœ¨ GitHub é¡¹ç›®çš„ README ç­‰åœ°æ–¹ï¼Œç›®å‰æˆ‘èƒ½æ‰¾åˆ°çš„æ–¹æ¡ˆåªèƒ½æ˜¯è´´å›¾äº†ï¼Œä»¥ä¸‹æ˜¯ä¸€ç§æ¯”è¾ƒæ–¹ä¾¿çš„è´´å›¾æ–¹æ¡ˆï¼š</p><ol><li><p>åœ¨ <a href="https://www.codecogs.com/latex/eqneditor.php" target="_blank" rel="noopener">https://www.codecogs.com/latex/eqneditor.php</a> ç½‘é¡µä¸Šéƒ¨çš„è¾“å…¥æ¡†é‡Œè¾“å…¥ LaTeX å…¬å¼ï¼Œæ¯”å¦‚ <code>$$x=\frac{-b\pm\sqrt{b^2-4ac}}{2a}$$</code>ï¼›</p></li><li><p>åœ¨ç½‘é¡µä¸‹éƒ¨æ‹·è´ URL Encoded çš„å†…å®¹ï¼Œæ¯”å¦‚ä»¥ä¸Šå…¬å¼ç”Ÿæˆçš„æ˜¯ <code>https://latex.codecogs.com/png.latex?%24%24x%3D%5Cfrac%7B-b%5Cpm%5Csqrt%7Bb%5E2-4ac%7D%7D%7B2a%7D%24%24</code>ï¼›</p></li><li><p>åœ¨æ–‡æ¡£éœ€è¦çš„åœ°æ–¹ä½¿ç”¨ä»¥ä¸Š URL è´´å›¾ï¼Œæ¯”å¦‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](https://latex.codecogs.com/png.latex?%24%24x%3D%5Cfrac%7B-b%5Cpm%5Csqrt%7Bb%5E2-4ac%7D%7D%7B2a%7D%24%24)</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹æ•ˆæœï¼š</p><p><img src="https://latex.codecogs.com/png.latex?%24%24x%3D%5Cfrac%7B-b%5Cpm%5Csqrt%7Bb%5E2-4ac%7D%7D%7B2a%7D%24%24" alt="img"></p></li></ol><h2 id="ä»»åŠ¡åˆ—è¡¨">ä»»åŠ¡åˆ—è¡¨</h2><p>åœ¨ GitHub å’Œ GitLab ç­‰ç½‘ç«™ï¼Œé™¤äº†å¯ä»¥ä½¿ç”¨æœ‰åºåˆ—è¡¨å’Œæ— åºåˆ—è¡¨å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»»åŠ¡åˆ—è¡¨ï¼Œå¾ˆé€‚åˆè¦åˆ—å‡ºä¸€äº›æ¸…å•çš„åœºæ™¯ã€‚</p><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">**è´­ç‰©æ¸…å•**</span><br><span class="line"></span><br><span class="line">- [ ] ä¸€æ¬¡æ€§æ°´æ¯</span><br><span class="line">- [x] è¥¿ç“œ</span><br><span class="line">- [ ] è±†æµ†</span><br><span class="line">- [x] å¯å£å¯ä¹</span><br><span class="line">- [ ] å°èŒ—åŒå­¦</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹æ•ˆæœï¼š</p><p><strong>è´­ç‰©æ¸…å•</strong></p><ul><li><p>[ ] ä¸€æ¬¡æ€§æ°´æ¯</p></li><li><p>[x] è¥¿ç“œ</p></li><li><p>[ ] è±†æµ†</p></li><li><p>[x] å¯å£å¯ä¹</p></li><li><p>[ ] å°èŒ—åŒå­¦</p></li></ul><h2 id="å¾…ç»­">å¾…ç»­â€¦</h2>]]></content>
    
    <summary type="html">
    
      Markdownå¥‡æ·«æŠ€å·§
    
    </summary>
    
      <category term="Markdown" scheme="http://blog.breakering.com/categories/Markdown/"/>
    
    
      <category term="Markdown" scheme="http://blog.breakering.com/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>ubuntu18.04è®¾ç½®å¼€æœºå¯åŠ¨è„šæœ¬</title>
    <link href="http://blog.breakering.com/2019/02/28/ubuntu-boot-script/"/>
    <id>http://blog.breakering.com/2019/02/28/ubuntu-boot-script/</id>
    <published>2019-02-28T05:20:45.000Z</published>
    <updated>2019-02-28T05:22:46.172Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¸€-å»ºç«‹rc-local-serviceæ–‡ä»¶">ä¸€ã€å»ºç«‹rc-local.serviceæ–‡ä»¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/systemd/system/rc-local.service</span><br></pre></td></tr></table></figure><h2 id="äºŒ-å°†ä¸‹åˆ—å†…å®¹å¤åˆ¶è¿›rc-local-serviceæ–‡ä»¶">äºŒã€å°†ä¸‹åˆ—å†…å®¹å¤åˆ¶è¿›rc-local.serviceæ–‡ä»¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=/etc/rc.local Compatibility</span><br><span class="line">ConditionPathExists=/etc/rc.local</span><br><span class="line"> </span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/etc/rc.local start</span><br><span class="line">TimeoutSec=0</span><br><span class="line">StandardOutput=tty</span><br><span class="line">RemainAfterExit=yes</span><br><span class="line">SysVStartPriority=99</span><br><span class="line"> </span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><h2 id="ä¸‰-åˆ›å»ºæ–‡ä»¶rc-local">ä¸‰ã€åˆ›å»ºæ–‡ä»¶rc.local</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/rc.local</span><br></pre></td></tr></table></figure><h2 id="å››-å°†ä¸‹åˆ—å†…å®¹å¤åˆ¶è¿›rc-localæ–‡ä»¶">å››ã€å°†ä¸‹åˆ—å†…å®¹å¤åˆ¶è¿›rc.localæ–‡ä»¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh -e</span><br><span class="line">#</span><br><span class="line"># rc.local</span><br><span class="line">#</span><br><span class="line"># This script is executed at the end of each multiuser runlevel.</span><br><span class="line"># Make sure that the script will &quot;exit 0&quot; on success or any other</span><br><span class="line"># value on error.</span><br><span class="line">#</span><br><span class="line"># In order to enable or disable this script just change the execution</span><br><span class="line"># bits.</span><br><span class="line">#</span><br><span class="line"># By default this script does nothing.</span><br><span class="line">echo &quot;çœ‹åˆ°è¿™è¡Œå­—ï¼Œè¯´æ˜æ·»åŠ è‡ªå¯åŠ¨è„šæœ¬æˆåŠŸã€‚&quot; &gt; /usr/local/test.log</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure><h2 id="äº”-ç»™rc-localåŠ ä¸Šæƒé™-å¯ç”¨æœåŠ¡">äº”ã€ç»™rc.localåŠ ä¸Šæƒé™,å¯ç”¨æœåŠ¡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x /etc/rc.local</span><br><span class="line">sudo systemctl enable rc-local</span><br></pre></td></tr></table></figure><h2 id="å…­-å¯åŠ¨æœåŠ¡å¹¶æ£€æŸ¥çŠ¶æ€">å…­ã€å¯åŠ¨æœåŠ¡å¹¶æ£€æŸ¥çŠ¶æ€</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start rc-local.service</span><br><span class="line">sudo systemctl status rc-local.service</span><br></pre></td></tr></table></figure><h2 id="ä¸ƒ-é‡å¯å¹¶æ£€æŸ¥test-logæ–‡ä»¶">ä¸ƒã€é‡å¯å¹¶æ£€æŸ¥test.logæ–‡ä»¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /usr/local/test.log</span><br></pre></td></tr></table></figure><blockquote><p>PS:ubuntu16.04ç›´æ¥ç¼–è¾‘/etc/rc.localæ–‡ä»¶å³å¯</p></blockquote>]]></content>
    
    <summary type="html">
    
      ubuntu18.04è®¾ç½®å¼€æœºå¯åŠ¨è„šæœ¬
    
    </summary>
    
      <category term="Ubuntu" scheme="http://blog.breakering.com/categories/Ubuntu/"/>
    
    
      <category term="Ubuntu" scheme="http://blog.breakering.com/tags/Ubuntu/"/>
    
  </entry>
  
  <entry>
    <title>Linuxå®‰è£…supervisor</title>
    <link href="http://blog.breakering.com/2019/01/27/install-supervisor/"/>
    <id>http://blog.breakering.com/2019/01/27/install-supervisor/</id>
    <published>2019-01-27T07:07:49.000Z</published>
    <updated>2019-01-27T07:29:58.846Z</updated>
    
    <content type="html"><![CDATA[<h1>ä»‹ç»</h1><p><a href="https://github.com/Supervisor/supervisor" target="_blank" rel="noopener">Supervisor</a> æ˜¯ä¸€ä¸ªç”¨ Python å†™çš„è¿›ç¨‹ç®¡ç†å·¥å…·ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å¯¹è¿›ç¨‹è¿›è¡Œå¯åŠ¨ã€åœæ­¢ã€é‡å¯ç­‰æ“ä½œã€‚</p><h1>å®‰è£…</h1><h2 id="for-ubuntu">For Ubuntu</h2><ul><li>å®‰è£…å‘½ä»¤</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install supervisor</span></span><br></pre></td></tr></table></figure><ul><li>é…ç½®</li></ul><p>å®‰è£…æˆåŠŸåï¼Œä¼šåœ¨<code>/etc/supervisor</code>ç›®å½•ä¸‹ï¼Œç”Ÿæˆ<code>supervisord.conf</code>é…ç½®æ–‡ä»¶ã€‚</p><p>è¿›ç¨‹é…ç½®ä¼šè¯»å–<code>/etc/supervisor/conf.d</code>ç›®å½•ä¸‹çš„<code>*.conf</code>é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨æ­¤ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª<code>product_celeryd.conf</code>è¿›ç¨‹é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[program:product_celeryd]</span><br><span class="line">directory      = /webapps/product/</span><br><span class="line">command        = /webapps/product/env/bin/celery -A licaishi worker -Q product</span><br><span class="line">user           = root</span><br><span class="line">stdout_logfile = /webapps/product/logs/product_celeryd.log</span><br><span class="line">stderr_logfile = /webapps/product/logs/product_celeryd.log</span><br><span class="line">autostart      = true</span><br><span class="line">autorestart    = true</span><br><span class="line">startsecs      = 10</span><br><span class="line">stopwaitsecs   = 600</span><br></pre></td></tr></table></figure><ul><li>å¯åŠ¨</li></ul><p>æ¥ç€å°±å¯ä»¥å¯åŠ¨ Supervisord äº†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> supervisord</span></span><br></pre></td></tr></table></figure><p><code>supervisorctl</code> å¸¸ç”¨å‘½ä»¤ï¼š</p><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>supervisorctl stop program_name</td><td>åœæ­¢æŸä¸ªè¿›ç¨‹</td></tr><tr><td>supervisorctl start program_name</td><td>å¯åŠ¨æŸä¸ªè¿›ç¨‹</td></tr><tr><td>supervisorctl restart program_name</td><td>é‡å¯æŸä¸ªè¿›ç¨‹</td></tr><tr><td>supervisorctl stop all</td><td>åœæ­¢å…¨éƒ¨è¿›ç¨‹</td></tr><tr><td>supervisorctl reload</td><td>è½½å…¥æœ€æ–°çš„é…ç½®æ–‡ä»¶ï¼Œåœæ­¢åŸæœ‰è¿›ç¨‹å¹¶æŒ‰æ–°çš„é…ç½®å¯åŠ¨ã€ç®¡ç†æ‰€æœ‰è¿›ç¨‹</td></tr><tr><td>supervisorctl update</td><td>æ ¹æ®æœ€æ–°çš„é…ç½®æ–‡ä»¶ï¼Œå¯åŠ¨æ–°é…ç½®æˆ–æœ‰æ”¹åŠ¨çš„è¿›ç¨‹ï¼Œé…ç½®æ²¡æœ‰æ”¹åŠ¨çš„è¿›ç¨‹ä¸ä¼šå—å½±å“è€Œé‡å¯</td></tr></tbody></table><h2 id="for-centos">For Centos</h2><ul><li><strong>å®‰è£…</strong></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yum install python-setuptools</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> easy_install supervisor</span></span><br></pre></td></tr></table></figure><ul><li><strong>åˆ›å»ºé…ç½®æ–‡ä»¶(supervisord.confï¼‰</strong></li></ul><p>ä½¿ç”¨rootèº«ä»½åˆ›å»ºä¸€ä¸ªå…¨å±€é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> echo_supervisord_conf &gt; /etc/supervisord.conf</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> supervisord -c /etc/supervisord.conf</span></span><br></pre></td></tr></table></figure><ul><li><strong>ä¿®æ”¹é…ç½®æ–‡ä»¶(supervisord.confï¼‰</strong></li></ul><p>å¦‚æœä¿®æ”¹äº† /etc/supervisord.conf ,éœ€è¦æ‰§è¡Œ<code># supervisorctl reload</code>æ¥é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå¦åˆ™ä¸ä¼šç”Ÿæ•ˆ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> supervisord æ˜¯å¯åŠ¨supervisor </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> supervisorctl æ˜¯æ§åˆ¶supervisord</span></span><br></pre></td></tr></table></figure><p>æ‰“å¼€supervisord.conf çš„ [include] å¼•å…¥ filesçš„é…ç½®.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[include]</span><br><span class="line">files = /etc/supervisor/conf.d/*.conf</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[include]</span><br><span class="line">files = /etc/supervisor/conf.d/*.conf</span><br></pre></td></tr></table></figure><p>éœ€è¦åˆ›å»º<code>/etc/supervisor/conf.d/</code></p><ul><li><strong>é‡å¯</strong></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> supervisorctl reload</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      Linuxä¸‹å®‰è£…supervisor
    
    </summary>
    
      <category term="supervisor" scheme="http://blog.breakering.com/categories/supervisor/"/>
    
    
      <category term="supervisor" scheme="http://blog.breakering.com/tags/supervisor/"/>
    
  </entry>
  
  <entry>
    <title>djangoä¿®æ”¹requestå¯¹è±¡</title>
    <link href="http://blog.breakering.com/2018/12/12/modify-request/"/>
    <id>http://blog.breakering.com/2018/12/12/modify-request/</id>
    <published>2018-12-12T10:43:17.000Z</published>
    <updated>2018-12-12T11:00:59.232Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Remove immutability:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> request.GET._mutable:</span><br><span class="line">   request.GET._mutable = <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># now you can spoil it</span></span><br><span class="line">request.GET[<span class="string">'pwd'</span>] = <span class="string">'iloveyou'</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      djangoä¿®æ”¹requestå¯¹è±¡
    
    </summary>
    
      <category term="Django" scheme="http://blog.breakering.com/categories/Django/"/>
    
    
      <category term="Django" scheme="http://blog.breakering.com/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>vueè·¨åŸŸé…ç½®</title>
    <link href="http://blog.breakering.com/2018/11/30/vue-cross-domain/"/>
    <id>http://blog.breakering.com/2018/11/30/vue-cross-domain/</id>
    <published>2018-11-30T07:16:11.000Z</published>
    <updated>2018-12-13T03:30:40.410Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¼€å‘ç¯å¢ƒ">å¼€å‘ç¯å¢ƒ</h2><p><strong>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯vue-cli3çš„è¯ï¼Œåˆ™å¯æŒ‰å¦‚ä¸‹é…ç½®</strong></p><ul><li>åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•åˆ›å»º<code>vue.config.js</code>æ–‡ä»¶</li><li>åœ¨æ–‡ä»¶ä¸­å†™å…¥å¦‚ä¸‹é…ç½®ä¿¡æ¯:</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…ç½®proxy</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        proxy: &#123;</span><br><span class="line">            <span class="string">'/api'</span>: &#123;</span><br><span class="line">                target: <span class="string">'https://xxxx.xxxxxxxxxx.com'</span>,</span><br><span class="line">                ws: <span class="literal">true</span>,</span><br><span class="line">                changeOrigin: <span class="literal">true</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>å‚è€ƒ<a href="https://cli.vuejs.org/zh/config/#devserver-proxy" target="_blank" rel="noopener">devserver-proxy</a></p></blockquote><h2 id="çº¿ä¸Šç¯å¢ƒ">çº¿ä¸Šç¯å¢ƒ</h2><p><strong>çº¿ä¸Šé€šè¿‡nginxä»£ç†,å®ç°è·¨åŸŸ</strong></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">   <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">   <span class="attribute">server_name</span> www.breakering.com;  <span class="comment"># ä½ çš„åŸŸå</span></span><br><span class="line">   <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">index</span> index.html;</span><br><span class="line">        <span class="attribute">root</span> /home/jacob/study/licaishi_pc/dist;  <span class="comment"># vue builä¹‹ådistæ–‡ä»¶å¤¹ä½ç½®</span></span><br><span class="line">        <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.html =<span class="number">404</span>;  <span class="comment"># å¯ä»¥è®©æµè§ˆå™¨åœ¨å­é¡µé¢ä¹Ÿèƒ½åˆ·æ–°ï¼Œä¸»è¦æ˜¯vue-routerçš„è·¯å¾„ä¸æ˜¯çœŸå®è·¯å¾„å¯¼è‡´</span></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment"># ç”¨/apiæ¥è®¿é—®å…¶ä»–ç½‘ç«™çš„æ¥å£ï¼Œå®ç°è·¨åŸŸ</span></span><br><span class="line">   <span class="attribute">location</span> /api &#123;</span><br><span class="line">        <span class="comment"># ä¸‹é¢ä¸‰ä¸ªæ˜¯è·¨åŸŸçš„ä¸€äº›è®¾ç½®</span></span><br><span class="line">        <span class="attribute">add_header</span> Access-Control-Allow-Origin *;</span><br><span class="line">        <span class="attribute">add_header</span> Access-Control-Allow-Methods <span class="string">'GET, POST, PUT, PATCH, DELETE, OPTIONS'</span>;</span><br><span class="line">        <span class="comment"># Access-Control-Allow-Headerséœ€è¦æ³¨æ„ï¼Œä¼šå±è”½ä¸€äº›headersï¼Œéƒ¨ç½²æ—¶éœ€è¦æ³¨æ„</span></span><br><span class="line">        <span class="attribute">add_header</span> Access-Control-Allow-Headers <span class="string">'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization,X-CSRFTOKEN'</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span> https://xxxx.xxxxxxxxxx.com/api;  <span class="comment"># å…¶ä»–ç½‘ç«™çš„æ¥å£</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      vueè·¨åŸŸé…ç½®
    
    </summary>
    
      <category term="vue" scheme="http://blog.breakering.com/categories/vue/"/>
    
    
      <category term="vue" scheme="http://blog.breakering.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>vueä¸­axioså…¨å±€è®¾ç½®csrftokenä»¥åŠAuthorization</title>
    <link href="http://blog.breakering.com/2018/11/29/vue-axios-set/"/>
    <id>http://blog.breakering.com/2018/11/29/vue-axios-set/</id>
    <published>2018-11-29T10:48:17.000Z</published>
    <updated>2018-12-12T06:49:11.111Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è¯´åœ¨å‰é¢">è¯´åœ¨å‰é¢</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œç”¨djangoåšåç«¯æœåŠ¡æ—¶ï¼Œå¯¹äºpostè¯·æ±‚æäº¤è¡¨å•æ—¶æ€»æ˜¯éœ€è¦csrftokençš„éªŒè¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åœ¨vueä¸­ä½¿ç”¨axioså‘èµ·è¯·æ±‚æ—¶å…¨å±€åœ¨headersé‡Œé¢è®¾ç½®csrftokenå‘¢ï¼Ÿä»¥åŠå…¨å±€è®¾ç½®Authorization?</p><h2 id="è®¾ç½®">è®¾ç½®</h2><p>å…¶å®éå¸¸ç®€å•ï¼Œåœ¨main.jsä¸­è®¾ç½®ä¸‹å³å¯ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./plugins/axios.js'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./plugins/cookies.js'</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    router,</span><br><span class="line">    store,</span><br><span class="line">    render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line"><span class="comment">//è¿›å…¥é¡µé¢æ—¶</span></span><br><span class="line">    created() &#123;</span><br><span class="line">        <span class="comment">// æ‹¦æˆªaxiosè¯·æ±‚</span></span><br><span class="line">        <span class="keyword">this</span>.axios.interceptors.request.use(</span><br><span class="line">            config =&gt; &#123;</span><br><span class="line">                <span class="comment">// è®¾ç½®ç™»å½•éªŒè¯token</span></span><br><span class="line">                <span class="keyword">const</span> token = <span class="keyword">this</span>.$store.state.userInfo.Authorization;</span><br><span class="line">                <span class="keyword">if</span> (token) &#123;</span><br><span class="line">                    config.headers.Authorization = token;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// è®¾ç½®csrftoken</span></span><br><span class="line">                <span class="keyword">const</span> csrftoken = <span class="keyword">this</span>.$cookies.get(<span class="string">'csrftoken'</span>);</span><br><span class="line">                <span class="keyword">if</span> (csrftoken) &#123;</span><br><span class="line">                    config.headers[<span class="string">'X-CSRFTOKEN'</span>] = csrftoken;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> config</span><br><span class="line">            &#125;,</span><br><span class="line">            error =&gt; &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">            &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>);</span><br></pre></td></tr></table></figure><p>å¦å¤–è´´ä¸‹æˆ‘çš„store.js:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">        userInfo: &#123;</span><br><span class="line">            username: <span class="string">""</span>,  <span class="comment">// ç”¨æˆ·å</span></span><br><span class="line">            Authorization: <span class="string">""</span>,  <span class="comment">// ç”¨æˆ·ç™»å½•çš„éªŒè¯Token</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    mutations: &#123;</span><br><span class="line">        <span class="comment">// æ›´æ–°ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        updateUserInfo(state, userInfo) &#123;</span><br><span class="line">            state.userInfo.Authorization = userInfo.Authorization;</span><br><span class="line">            state.userInfo.username = userInfo.username;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    actions: &#123;</span><br><span class="line">        updateUserInfo(&#123;commit&#125;, userInfo) &#123;</span><br><span class="line">            commit(<span class="string">'updateUserInfo'</span>, userInfo)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="è€ƒè™‘å°è£…axios">è€ƒè™‘å°è£…axios</h2><h3 id="å°è£…è¿›api">å°è£…è¿›api</h3><ul><li>åˆ›å»ºapiæ–‡ä»¶å¤¹,å…¶ä¸­åˆ›å»ºä¸€ä¸ª<code>api.js</code></li><li>ç¼–è¾‘pluginsä¸‹çš„<code>axios.js</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> VueAxios <span class="keyword">from</span> <span class="string">'vue-axios'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'../store'</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueAxios, axios);</span><br><span class="line"></span><br><span class="line"><span class="comment">// base url</span></span><br><span class="line"><span class="comment">// Vue.axios.defaults.baseURL = 'http://127.0.0.1:9001';</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚è¶…æ—¶æ—¶é—´</span></span><br><span class="line">Vue.axios.defaults.timeout = <span class="number">10000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">Vue.axios.interceptors.request.use(</span><br><span class="line">    config =&gt; &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®ç™»å½•éªŒè¯token</span></span><br><span class="line">        <span class="keyword">const</span> token = store.state.userInfo.Authorization;</span><br><span class="line">        <span class="keyword">if</span> (token) &#123;</span><br><span class="line">            config.headers.Authorization = token;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è®¾ç½®csrftoken</span></span><br><span class="line">        <span class="keyword">const</span> csrftoken = Vue.cookies.get(<span class="string">'csrftoken'</span>);</span><br><span class="line">        <span class="keyword">if</span> (csrftoken) &#123;</span><br><span class="line">            config.headers[<span class="string">'X-CSRFTOKEN'</span>] = csrftoken;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(token, csrftoken);</span><br><span class="line">        <span class="keyword">return</span> config</span><br><span class="line">    &#125;,</span><br><span class="line">    error =&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">Vue.axios.interceptors.response.use(</span><br><span class="line">    <span class="comment">// è¯·æ±‚æˆåŠŸ</span></span><br><span class="line">    res =&gt; <span class="built_in">Promise</span>.resolve(res),</span><br><span class="line">    <span class="comment">// è¯·æ±‚å¤±è´¥</span></span><br><span class="line">    error =&gt; &#123;</span><br><span class="line">        <span class="comment">// è¯·æ±‚å·²å‘å‡ºï¼Œä½†æ˜¯ä¸åœ¨2xxçš„èŒƒå›´</span></span><br><span class="line">        <span class="built_in">console</span>.log(error);  <span class="comment">// è¿™å„¿å¯ä»¥ç”¨UIæ’ä»¶åšä¸ªå¼¹çª—æé†’</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><ul><li>ç¼–è¾‘<code>api.js</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™»å½•æ¥å£</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> login = <span class="function"><span class="params">data</span> =&gt;</span> Vue.axios.post(</span><br><span class="line">    <span class="string">'/api/xxxx/login/'</span>, data</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ–°é—»åˆ—è¡¨æ¥å£</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getNews = <span class="function"><span class="params">params</span> =&gt;</span> Vue.axios.get(</span><br><span class="line">    <span class="string">'/api/xxxx/newsflashmaterial/?ordering=-create_time'</span>, params</span><br><span class="line">);</span><br></pre></td></tr></table></figure><ul><li>æˆ‘çš„<code>main.js</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./plugins/element.js'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./plugins/cookies.js'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./plugins/axios.js'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.....</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">import</span> &#123;login&#125; <span class="keyword">from</span> <span class="string">"../api/api"</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        name: <span class="string">"Login"</span>,</span><br><span class="line">        data() &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                formLabelAlign: &#123;</span><br><span class="line">                    username: <span class="string">''</span>,</span><br><span class="line">                    password: <span class="string">''</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            submitForm() &#123;</span><br><span class="line">                login(<span class="keyword">this</span>.formLabelAlign).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="comment">// ç™»å½•æˆåŠŸä¹‹åçš„æ“ä½œ</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å®Œæˆ">å®Œæˆ</h2>]]></content>
    
    <summary type="html">
    
      vueä¸­axioså…¨å±€è®¾ç½®csrftokenä»¥åŠAuthorization
    
    </summary>
    
      <category term="vue" scheme="http://blog.breakering.com/categories/vue/"/>
    
    
      <category term="vue" scheme="http://blog.breakering.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>vueä½¿ç”¨axios</title>
    <link href="http://blog.breakering.com/2018/11/27/vue-use-axios/"/>
    <id>http://blog.breakering.com/2018/11/27/vue-use-axios/</id>
    <published>2018-11-27T02:23:02.000Z</published>
    <updated>2018-12-12T06:49:11.043Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…">å®‰è£…</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save axios vue-axios</span><br></pre></td></tr></table></figure><h2 id="å¼•å…¥">å¼•å…¥</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import axios from &apos;axios&apos;</span><br><span class="line">import VueAxios from &apos;vue-axios&apos;</span><br><span class="line"></span><br><span class="line">axios.defaults.baseURL=&apos;http://localhost:8000&apos;;  // å¯ä»¥è®¾ç½®baseURL</span><br><span class="line">Vue.use(VueAxios, axios)</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨">ä½¿ç”¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">getNewsList()&#123;</span><br><span class="line">      this.axios.get(&apos;api/getNewsList&apos;).then((response)=&gt;&#123;</span><br><span class="line">        this.newsList=response.data.data;</span><br><span class="line">      &#125;).catch((response)=&gt;&#123;</span><br><span class="line">        console.log(response);</span><br><span class="line">      &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒ">å‚è€ƒ</h2><p><a href="https://segmentfault.com/a/1190000013128858" target="_blank" rel="noopener">vueå…¨å±€ä½¿ç”¨axiosçš„æ–¹æ³•</a></p><p><a href="https://www.npmjs.com/package/vue-axios" target="_blank" rel="noopener">vue-axios</a></p><p><a href="https://blog.csdn.net/wild46cat/article/details/78006280" target="_blank" rel="noopener">vueæ·»åŠ axiosï¼Œå¹¶ä¸”æŒ‡å®šbaseurl</a></p>]]></content>
    
    <summary type="html">
    
      vueä½¿ç”¨axioså‘èµ·httpè¯·æ±‚
    
    </summary>
    
      <category term="vue" scheme="http://blog.breakering.com/categories/vue/"/>
    
    
      <category term="vue" scheme="http://blog.breakering.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>jupyterç¾åŒ–</title>
    <link href="http://blog.breakering.com/2018/11/26/jupyter-beauty/"/>
    <id>http://blog.breakering.com/2018/11/26/jupyter-beauty/</id>
    <published>2018-11-26T02:17:10.000Z</published>
    <updated>2018-12-12T06:49:11.159Z</updated>
    
    <content type="html"><![CDATA[<h1>jupyterthemes</h1><h2 id="å®‰è£…jupyterä¸»é¢˜">å®‰è£…jupyterä¸»é¢˜</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># install jupyterthemes</span><br><span class="line">pip install jupyterthemes</span><br><span class="line"></span><br><span class="line"># upgrade to latest version</span><br><span class="line">pip install --upgrade jupyterthemes</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨ä¸»é¢˜">ä½¿ç”¨ä¸»é¢˜</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jt -t monokai -fs 95 -altp -tfs 11 -nfs 115 -cellw 88% -N -T</span><br></pre></td></tr></table></figure><h2 id="æ›´å¤šä¸»é¢˜è®¾ç½®">æ›´å¤šä¸»é¢˜è®¾ç½®</h2><p><a href="https://github.com/dunovank/jupyter-themes" target="_blank" rel="noopener">jupyterthemes</a></p><h1>jupyter_contrib_nbextensions</h1><h2 id="å®‰è£…jupyter-contrib-nbextensions">å®‰è£…jupyter_contrib_nbextensions</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install jupyter_contrib_nbextensions</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…jså’Œcssæ–‡ä»¶">å®‰è£…jså’Œcssæ–‡ä»¶</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jupyter contrib nbextension install --user</span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•é€‰ç”¨">æ‰©å±•é€‰ç”¨</h2><p><img src="/images/2018-11-26/1543199245282.png" alt="1543199245282"></p><h2 id="å®Œæˆ">å®Œæˆ</h2>]]></content>
    
    <summary type="html">
    
      jupyterç¾åŒ–
    
    </summary>
    
      <category term="jupyter" scheme="http://blog.breakering.com/categories/jupyter/"/>
    
    
      <category term="jupyter" scheme="http://blog.breakering.com/tags/jupyter/"/>
    
  </entry>
  
  <entry>
    <title>ubuntu ä¸­ Typora å®‰è£…</title>
    <link href="http://blog.breakering.com/2018/11/26/ubuntu-typora/"/>
    <id>http://blog.breakering.com/2018/11/26/ubuntu-typora/</id>
    <published>2018-11-26T01:53:19.000Z</published>
    <updated>2018-12-12T06:49:11.075Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># optional, but recommended</span><br><span class="line"></span><br><span class="line">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys BA300B7755AFCFAE</span><br><span class="line"></span><br><span class="line"># add Typora&apos;s repository</span><br><span class="line"></span><br><span class="line">sudo add-apt-repository &apos;deb http://typora.io linux/&apos;</span><br><span class="line"></span><br><span class="line">sudo apt-get update</span><br><span class="line"></span><br><span class="line"># install typora</span><br><span class="line"></span><br><span class="line">sudo apt-get install typora</span><br></pre></td></tr></table></figure><blockquote><p>å¦å¤–æ¨èå®‰è£…ä¸‹Vueçš„themeï¼Œåœ°å€:<a href="https://theme.typora.io/theme/Vue/" target="_blank" rel="noopener">https://theme.typora.io/theme/Vue/</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      ubuntu ä¸­ Typora å®‰è£…
    
    </summary>
    
      <category term="Ubuntu" scheme="http://blog.breakering.com/categories/Ubuntu/"/>
    
      <category term="å·¥å…·" scheme="http://blog.breakering.com/categories/Ubuntu/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="Ubuntu" scheme="http://blog.breakering.com/tags/Ubuntu/"/>
    
      <category term="å·¥å…·" scheme="http://blog.breakering.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>GitLabå‡çº§</title>
    <link href="http://blog.breakering.com/2018/11/19/gitlab-update/"/>
    <id>http://blog.breakering.com/2018/11/19/gitlab-update/</id>
    <published>2018-11-19T08:18:49.000Z</published>
    <updated>2018-12-12T06:46:59.849Z</updated>
    
    <content type="html"><![CDATA[<h1>æ›´æ–° GitLab</h1><blockquote><p>æˆ‘ä»¬ç”¨çš„æ˜¯ GitLab Omnibus 7.10.5 ç‰ˆæœ¬ï¼ŒæŸ¥åˆ°<a href="http://docs.gitlab.com/omnibus/update/README.html" target="_blank" rel="noopener">Doc</a>ï¼ˆ6.x.x ç­‰ä½ç‰ˆæœ¬åŒºåˆ«å¯¹å¾…ï¼Œè¯¦è§æ–‡æ¡£ï¼‰ã€‚<br>æŒ‰ç…§æ–‡æ¡£ï¼š</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># To update to a newer GitLab version, all you have to do is:</span><br><span class="line"># Debian/Ubuntu</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install gitlab-ce</span><br><span class="line"># Centos/RHEL</span><br><span class="line">sudo yum install gitlab-ce</span><br></pre></td></tr></table></figure><p>çœ‹èµ·æ¥å¤ªç®€å•äº†ï¼äº‹å®ä¸Šï¼Œä¹Ÿå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p><p>ä½†æ˜¯ï¼Œé—®é¢˜æ¥äº†ï¼Œ<code>sudo apt-get install gilab-ce</code> é»˜è®¤æ‰€ç”¨çš„æºæ˜¯ <em><a href="http://packages-gitlab-com.s3.amazonaws.com" target="_blank" rel="noopener">packages-gitlab-com.s3.amazonaws.com</a></em>ï¼Œç„¶åä½ æ‡‚çš„ï¼Œè¢«å¢™äº†ï¼</p><p>è§£å†³åŠæ³•æœ‰ä¸¤ä¸ªï¼š</p><ol><li>ç»™ apt åŠ ä»£ç†ï¼›</li><li>æ¢æºã€‚</li></ol><h2 id="1-ç»™-apt-åŠ ä»£ç†">1). ç»™ apt åŠ ä»£ç†</h2><p>è€ƒè™‘åˆ°æ¢æºå¯èƒ½äº§ç”Ÿå…¶ä»–çš„ä¾èµ–é—®é¢˜ï¼Œå…ˆå°è¯• åŠ ä»£ç†ã€‚ç»“æœæ˜¯åŠ äº†ä»£ç†è¿˜æ˜¯ä¸è¡Œï¼åŸå› å¯èƒ½æ˜¯ä»£ç†è¿æ¥é€Ÿåº¦é—®é¢˜ï¼Œæ€»æ˜¯è¶…æ—¶ã€‚</p><p>è¿™é‡Œå‚è€ƒçš„æ˜¯ <a href="http://www.a-ho.com/2016/01/16/%E6%89%93%E9%80%A0Linux-%E7%BB%88%E7%AB%AF%E7%BF%BB%E5%A2%99%E7%8E%AF%E5%A2%83/" target="_blank" rel="noopener">æ‰“é€ Linux ç»ˆç«¯ç¿»å¢™ç¯å¢ƒ</a>  ä½¿ç”¨ <code>shadowsocks + privoxy</code> ã€‚</p><h2 id="2-æ¢æºè§£å†³">2). æ¢æºè§£å†³ï¼</h2><p>Docs é‡Œå·²ç»æœ‰å£°æ˜å…¶å®ï¼š</p><p><img src="/images/2018-11-19/3.png" alt=""></p><ul><li>é¦–å…ˆï¼Œæ·»åŠ ä¿¡ä»» GitLab é‡Œçš„ GPG å…¬é’¥ï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://packages.gitlab.com/gpg.key 2&gt; /dev/null | sudo apt-key add - &amp;&gt;/dev/null</span><br></pre></td></tr></table></figure><ul><li>ç„¶åæŠŠ <code>/etc/apt/sources.list.d/gitlab_gitlab-ce.list</code> æ–‡ä»¶ä¸­é»˜è®¤çš„æºæ¢æˆ <em>deb <a href="https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/ubuntu" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/ubuntu</a> trusty main</em></li></ul><p><img src="/images/2018-11-19/4.png" alt=""></p><ul><li>æœ€åï¼š</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo update</span><br><span class="line">sudo apt-get install gitlab-ce</span><br></pre></td></tr></table></figure><blockquote><blockquote><blockquote><p>å®‰è£…å®Œæˆï¼</p></blockquote></blockquote></blockquote><h1>å¯¹äºæ›´æ–°ç‰ˆæœ¬è·¨åº¦è¾ƒå¤§çš„æƒ…å†µ</h1><h2 id="1-å…³é—­éƒ¨åˆ†gitlabæœåŠ¡">1). å…³é—­éƒ¨åˆ†gitlabæœåŠ¡</h2><p>å‡çº§ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦å…³é—­gitlabéƒ¨åˆ†æœåŠ¡ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl stop unicorn</span><br><span class="line">gitlab-ctl stop sidekiq</span><br><span class="line">gitlab-ctl stop nginx</span><br></pre></td></tr></table></figure><h2 id="2-é€‰æ‹©è¦å‡çº§çš„ç‰ˆæœ¬">2). é€‰æ‹©è¦å‡çº§çš„ç‰ˆæœ¬</h2><p><a href="https://packages.gitlab.com/gitlab/gitlab-ce?filter=debs" target="_blank" rel="noopener">ç‰ˆæœ¬æŸ¥çœ‹åœ°å€</a></p><p>ç„¶åæ‰§è¡Œå‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install gitlab-ce=11.0.3-ce.0</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>11.0.3</code>æ›¿æ¢ä¸ºä½ è¦å‡çº§çš„ç‰ˆæœ¬å·ã€‚</p><p><strong>ps:ç‰ˆæœ¬è·¨åº¦è¿‡å¤§ï¼Œè¯·åŠ¡å¿…ä¸€ä¸ªå°ç‰ˆæœ¬ä¸€ä¸ªå°ç‰ˆæœ¬çš„æ›´æ–°</strong></p><p>å¦å¤–ï¼Œé™„ä¸Šä¸€æ¬¡æˆåŠŸçš„æ›´æ–°è¿‡ç¨‹å¯¹åº”çš„ç‰ˆæœ¬å·ï¼š</p><p><code>9.2.5--&gt;9.5.6--&gt;10.0.6--&gt;10.8.5--&gt;11.0.3</code></p><h2 id="3-é‡å¯gitlab">3). é‡å¯gitlab</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl reconfigure</span><br><span class="line">gitlab-ctl restart</span><br></pre></td></tr></table></figure><h1>References:</h1><ol><li><a href="http://www.a-ho.com/2016/01/16/%E6%89%93%E9%80%A0Linux-%E7%BB%88%E7%AB%AF%E7%BF%BB%E5%A2%99%E7%8E%AF%E5%A2%83/" target="_blank" rel="noopener">http://www.a-ho.com/2016/01/16/æ‰“é€ Linux-ç»ˆç«¯ç¿»å¢™ç¯å¢ƒ/</a></li><li><a href="https://about.gitlab.com/downloads/#ubuntu1404" target="_blank" rel="noopener">https://about.gitlab.com/downloads/#ubuntu1404</a></li><li><a href="https://mirror.tuna.tsinghua.edu.cn/help/gitlab-ce/" target="_blank" rel="noopener">https://mirror.tuna.tsinghua.edu.cn/help/gitlab-ce/</a></li><li><a href="http://docs.gitlab.com/omnibus/update/README.html" target="_blank" rel="noopener">http://docs.gitlab.com/omnibus/update/README.html</a></li><li><a href="https://about.gitlab.com/upgrade-to-package-repository/" target="_blank" rel="noopener">https://about.gitlab.com/upgrade-to-package-repository/</a></li><li><a href="https://packages.gitlab.com/gitlab/gitlab-ce/packages/ubuntu/trusty/gitlab-ce_8.9.5-ce.0_amd64.deb" target="_blank" rel="noopener">https://packages.gitlab.com/gitlab/gitlab-ce/packages/ubuntu/trusty/gitlab-ce_8.9.5-ce.0_amd64.deb</a></li><li><a href="https://www.ilanni.com/?p=13917" target="_blank" rel="noopener">https://www.ilanni.com/?p=13917</a></li><li><a href="https://www.58jb.com/html/189.html" target="_blank" rel="noopener">https://www.58jb.com/html/189.html</a></li></ol>]]></content>
    
    <summary type="html">
    
      GitLabå‡çº§
    
    </summary>
    
      <category term="GitLab" scheme="http://blog.breakering.com/categories/GitLab/"/>
    
    
      <category term="GitLab" scheme="http://blog.breakering.com/tags/GitLab/"/>
    
  </entry>
  
  <entry>
    <title>GitLabå¤‡ä»½ä¸æ¢å¤</title>
    <link href="http://blog.breakering.com/2018/11/19/gitlab-backup/"/>
    <id>http://blog.breakering.com/2018/11/19/gitlab-backup/</id>
    <published>2018-11-19T08:15:50.000Z</published>
    <updated>2018-12-12T06:47:00.029Z</updated>
    
    <content type="html"><![CDATA[<h1>ä¸€ã€ å¤‡ä»½gitlab</h1><p>gitlabçš„å¤‡ä»½æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨gitlabæœ¬èº«æä¾›çš„å‘½ä»¤è¿›è¡Œå¤‡ä»½å³å¯ã€‚</p><h2 id="1-1-é€šè¿‡gitlab-rakeå‘½ä»¤å¤‡ä»½gitlab">1.1 é€šè¿‡gitlab-rakeå‘½ä»¤å¤‡ä»½gitlab</h2><p>gitlabæä¾›çš„å¤‡ä»½å‘½ä»¤ä¸ºgitlab-rakeï¼Œå¤‡ä»½å‘½ä»¤ä½¿ç”¨å¦‚ä¸‹:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-rake gitlab:backup:create</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤ä¼šå¤‡ä»½gitlabä»“åº“ã€æ•°æ®åº“ã€ç”¨æˆ·ã€ç”¨æˆ·ç»„ã€ç”¨æˆ·å¯†é’¥ã€æƒé™ç­‰ä¿¡æ¯ã€‚</p><p>å¤‡ä»½å®Œæˆåå¤‡ä»½æ–‡ä»¶ä¼šå‡ºç°åœ¨<code>/var/opt/gitlab/backups/</code><br><img src="/images/2018-11-19/1.png" alt=""></p><p>å½“ç„¶å¤‡ä»½çš„ä½ç½®å¯ä»¥æ›´æ¢,ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/gitlab/gitlab.rb</span><br></pre></td></tr></table></figure><p><img src="/images/2018-11-19/2.png" alt=""></p><p>ä¿®æ”¹ä¸Šå›¾<code>backup_path</code>çš„å€¼å³å¯ï¼Œä¹‹åä½¿ç”¨<code>gitlab-ctl reconfigure</code>ä½¿å¾—é…ç½®ç”Ÿæ•ˆ</p><p><strong>psï¼šå¤‡ä»½æ–‡ä»¶çš„åç§°ä¸­1537261122_2018_09_18_9.2.5æ˜¯æ­¤æ¬¡å¤‡ä»½çš„ç¼–å·ã€‚è¯¥ç¼–å·æˆ‘ä»¬ä¼šåœ¨åç»­æ¢å¤gitlabæ•°æ®ä½¿ç”¨åˆ°ã€‚</strong></p><h2 id="1-2-å®šæ—¶å¤‡ä»½gitlab">1.2 å®šæ—¶å¤‡ä»½gitlab</h2><p>å¦‚æœè¦ä½¿ï½‡itlabè‡ªåŠ¨è¿›è¡Œå¤‡ä»½çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡crontabå‘½ä»¤æ¥å®ç°è‡ªåŠ¨å¤‡ä»½ã€‚å¼ºçƒˆå»ºè®®ä½¿ç”¨ç³»ç»Ÿcrontabå‘½ä»¤ï¼Œè€Œä¸æ˜¯ç”¨æˆ·crontabã€‚</p><p>ä»¥å®ç°æ¯å¤©å‡Œæ™¨4ç‚¹è¿›è¡Œä¸€æ¬¡è‡ªåŠ¨å¤‡ä»½ä¸ºä¾‹ï¼Œç³»ç»Ÿçš„crontabé…ç½®å¦‚ä¸‹:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/crontab</span><br></pre></td></tr></table></figure><p><code>0 4 * * * root /opt/gitlab/bin/gitlab-rake gitlab:backup:create CRON=1</code></p><p>ç„¶åé‡å¯crontabæœåŠ¡ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart crond</span><br></pre></td></tr></table></figure><h2 id="1-3-ä¿ç•™éƒ¨åˆ†å¤‡ä»½æ–‡ä»¶">1.3 ä¿ç•™éƒ¨åˆ†å¤‡ä»½æ–‡ä»¶</h2><p>éšç€æ—¶é—´çš„æ¨ç§»gitlabå¤‡ä»½æ–‡ä»¶è¶Šæ¥è¶Šå¤šï¼ŒæœåŠ¡å™¨çš„ç£ç›˜ç©ºé—´ä¹Ÿä¸å¤Ÿå¤§ã€‚</p><p>æ­¤æ—¶æˆ‘ä»¬å°±è¦åˆ é™¤éƒ¨åˆ†æ—§çš„å¤‡ä»½æ–‡ä»¶ï¼Œgitlabä¹Ÿæä¾›äº†åˆ é™¤æ—§çš„å¤‡ä»½æ–‡ä»¶åŠŸèƒ½ã€‚è¯¥åŠŸèƒ½åœ¨gitlabçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œè¿›è¡Œé…ç½®å³å¯ã€‚</p><p>åœ¨æ­¤ä»¥ä¿ç•™7å¤©ä¹‹å‰çš„å¤‡ä»½æ–‡ä»¶ä¸ºä¾‹ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/gitlab/gitlab.rb</span><br></pre></td></tr></table></figure><p><code>gitlab_rails[â€˜backup_keep_timeâ€™] = 604800</code></p><p>å…¶ä¸­backup_keep_timeæ˜¯ä»¥ç§’ä¸ºå•ä½è¿›è¡Œè®¡ç®—çš„ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤<code>gitlab-ctl reconfigure</code>å³å¯ã€‚</p><h1>äºŒã€gitlabä»“åº“æ¢å¤</h1><p>è¦éªŒè¯gitlabå¤‡ä»½çš„æœ‰æ•ˆæ€§ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¯¥å¤‡ä»½æ–‡ä»¶å¤åˆ¶åˆ°å·²ç»å®‰è£…å¥½gitlabæœåŠ¡å™¨çš„/var/opt/gitlab/backups/ç›®å½•ä¸‹ã€‚ç„¶åè¿›è¡Œæ•°æ®æ¢å¤ï¼Œæœ€åè®¿é—®å¹¶æŸ¥çœ‹å…¶æ•°æ®å®Œæ•´æ€§å³å¯ã€‚</p><p>é€šè¿‡gitlabå¤‡ä»½æ–‡ä»¶å¯ä»¥æ¢å¤gitlabæ‰€æœ‰çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä»“åº“ã€æ•°æ®åº“ã€ç”¨æˆ·ã€ç”¨æˆ·ç»„ã€ç”¨æˆ·å¯†é’¥ã€æƒé™ç­‰ä¿¡æ¯ã€‚</p><p><strong>psï¼šæ–°æœåŠ¡å™¨ä¸Šçš„gitlabçš„ç‰ˆæœ¬å·å¿…é¡»ä¸åˆ›å»ºå¤‡ä»½æ—¶çš„gitlabç‰ˆæœ¬å·ç›¸åŒã€‚</strong></p><p>gitlabæ•°æ®æ¢å¤æ¯”è¾ƒç®€å•ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><h2 id="2-1-åœæ­¢ç›¸å…³æ•°æ®è¿æ¥æœåŠ¡">2.1 åœæ­¢ç›¸å…³æ•°æ®è¿æ¥æœåŠ¡</h2><p>åœ¨gitlabæœåŠ¡å™¨ä¸Šåœæ­¢ç›¸å…³æ•°æ®è¿æ¥æœåŠ¡ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl stop unicorn</span><br><span class="line">gitlab-ctl stop sidekiq</span><br></pre></td></tr></table></figure><h2 id="2-2-æ¢å¤gitlabä»“åº“">2.2 æ¢å¤gitlabä»“åº“</h2><p>ç°åœ¨æˆ‘ä»¬è¦ä»1537261122_2018_09_18_9.2.5è¿™ä¸ªå¤‡ä»½ç¼–å·ä¸­ï¼Œæ¢å¤æ•°æ®ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-rake gitlab:backup:restore BACKUP=1537261122_2018_09_18_9.2.5</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºç°å¤šä¸ªdoneçš„ä¿¡æ¯ï¼Œè¯´æ˜æ•´ä¸ªgitlabæ•°æ®å°±å·²ç»æ­£å¸¸æ¢å¤å®Œæ¯•ã€‚</p><h2 id="2-3-å¯åŠ¨gitlabæœåŠ¡">2.3 å¯åŠ¨gitlabæœåŠ¡</h2><p>æ¢å¤å®Œæ¯•ä»¥åï¼Œæˆ‘ä»¬ç°åœ¨æ¥å¯åŠ¨gitlabï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl start</span><br></pre></td></tr></table></figure><p><strong>å¼ºçƒˆå»ºè®®ï¼šé‡å¯è¯¥æ–°æœåŠ¡å™¨ã€‚</strong></p><h1>ä¸‰ã€References:</h1><ol><li><a href="https://www.ilanni.com/?p=13890" target="_blank" rel="noopener">gitlabçš„å¤‡ä»½ä¸æ¢å¤</a></li></ol>]]></content>
    
    <summary type="html">
    
      GitLabå¤‡ä»½ä¸æ¢å¤
    
    </summary>
    
      <category term="GitLab" scheme="http://blog.breakering.com/categories/GitLab/"/>
    
    
      <category term="GitLab" scheme="http://blog.breakering.com/tags/GitLab/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨pipenvç®¡ç†pythoné¡¹ç›®</title>
    <link href="http://blog.breakering.com/2018/11/19/pipenv/"/>
    <id>http://blog.breakering.com/2018/11/19/pipenv/</id>
    <published>2018-11-19T06:19:10.000Z</published>
    <updated>2019-02-21T10:19:39.671Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£…pipenv">å®‰è£…pipenv</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install pipenv</span><br></pre></td></tr></table></figure><h2 id="é¡¹ç›®åˆå§‹åŒ–">é¡¹ç›®åˆå§‹åŒ–</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> your_project</span><br><span class="line">PIPENV_VENV_IN_PROJECT=<span class="literal">true</span> pipenv --python=3.6</span><br></pre></td></tr></table></figure><p>å°†åœ¨é¡¹ç›®ç›®å½•ä¸­åˆ›å»ºæ–°æ–‡ä»¶<code>Pipfile</code>å’Œä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒ<code>.venv</code>, <code>--python=3.6</code>åˆ™æ˜¯ä½¿ç”¨<code>python3.6</code>æ¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ,<code>PIPENV_VENV_IN_PROJECT=true</code>åˆ™æ˜¯è®©è™šæ‹Ÿç¯å¢ƒåˆ›å»ºåœ¨è¯¥é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚</p><p>å¦‚æœä½ æ·»åŠ â€“twoæˆ–â€“threeæ ‡å¿—åˆ°ä¸Šé¢çš„æœ€åä¸€ä¸ªå‘½ä»¤ï¼Œå®ƒåˆ†åˆ«ä½¿ç”¨Python 2æˆ–3æ¥åˆå§‹åŒ–ä½ çš„é¡¹ç›®ã€‚ å¦åˆ™å°†ä½¿ç”¨é»˜è®¤ç‰ˆæœ¬çš„Pythonã€‚</p><h2 id="æ¿€æ´»å¼€å‘ç¯å¢ƒ">æ¿€æ´»å¼€å‘ç¯å¢ƒ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipenv shell</span><br></pre></td></tr></table></figure><h2 id="é€€å‡ºå¼€å‘ç¯å¢ƒ">é€€å‡ºå¼€å‘ç¯å¢ƒ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨è¯´æ˜-pipenv-h">ä½¿ç”¨è¯´æ˜(<code>pipenv -h</code>)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">Usage: pipenv [OPTIONS] COMMAND [ARGS]...</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  --<span class="built_in">where</span>             Output project home information.</span><br><span class="line">  --venv              Output virtualenv information.</span><br><span class="line">  --py                Output Python interpreter information.</span><br><span class="line">  --envs              Output Environment Variable options.</span><br><span class="line">  --rm                Remove the virtualenv.</span><br><span class="line">  --bare              Minimal output.</span><br><span class="line">  --completion        Output completion (to be <span class="built_in">eval</span><span class="string">'d).</span></span><br><span class="line"><span class="string">  --man               Display manpage.</span></span><br><span class="line"><span class="string">  --support           Output diagnostic information for use in GitHub issues.</span></span><br><span class="line"><span class="string">  --site-packages     Enable site-packages for the virtualenv.</span></span><br><span class="line"><span class="string">  --python TEXT       Specify which version of Python virtualenv should use.</span></span><br><span class="line"><span class="string">  --three / --two     Use Python 3/2 when creating virtualenv.</span></span><br><span class="line"><span class="string">  --clear             Clears caches (pipenv, pip, and pip-tools).</span></span><br><span class="line"><span class="string">  -v, --verbose       Verbose mode.</span></span><br><span class="line"><span class="string">  --pypi-mirror TEXT  Specify a PyPI mirror.</span></span><br><span class="line"><span class="string">  --version           Show the version and exit.</span></span><br><span class="line"><span class="string">  -h, --help          Show this message and exit.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Usage Examples:</span></span><br><span class="line"><span class="string">   Create a new project using Python 3.7, specifically:</span></span><br><span class="line"><span class="string">   $ pipenv --python 3.7</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Remove project virtualenv (inferred from current directory):</span></span><br><span class="line"><span class="string">   $ pipenv --rm</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Install all dependencies for a project (including dev):</span></span><br><span class="line"><span class="string">   $ pipenv install --dev</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Create a lockfile containing pre-releases:</span></span><br><span class="line"><span class="string">   $ pipenv lock --pre</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Show a graph of your installed dependencies:</span></span><br><span class="line"><span class="string">   $ pipenv graph</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Check your installed dependencies for security vulnerabilities:</span></span><br><span class="line"><span class="string">   $ pipenv check</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Install a local setup.py into your virtual environment/Pipfile:</span></span><br><span class="line"><span class="string">   $ pipenv install -e .</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">   Use a lower-level pip command:</span></span><br><span class="line"><span class="string">   $ pipenv run pip freeze</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Commands:</span></span><br><span class="line"><span class="string">  check      Checks for security vulnerabilities and against PEP 508 markers</span></span><br><span class="line"><span class="string">             provided in Pipfile.</span></span><br><span class="line"><span class="string">  clean      Uninstalls all packages not specified in Pipfile.lock.</span></span><br><span class="line"><span class="string">  graph      Displays currently-installed dependency graph information.</span></span><br><span class="line"><span class="string">  install    Installs provided packages and adds them to Pipfile, or (if no</span></span><br><span class="line"><span class="string">             packages are given), installs all packages from Pipfile.</span></span><br><span class="line"><span class="string">  lock       Generates Pipfile.lock.</span></span><br><span class="line"><span class="string">  open       View a given module in your editor.</span></span><br><span class="line"><span class="string">  run        Spawns a command installed into the virtualenv.</span></span><br><span class="line"><span class="string">  shell      Spawns a shell within the virtualenv.</span></span><br><span class="line"><span class="string">  sync       Installs all packages specified in Pipfile.lock.</span></span><br><span class="line"><span class="string">  uninstall  Un-installs a provided package and removes it from Pipfile.</span></span><br><span class="line"><span class="string">  update     Runs lock, then sync.</span></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“">æ€»ç»“</h2><p><code>pipenv</code>ä½¿å¾—å¼€å‘å’Œç®¡ç†é¡¹ç›®åŒ…çš„è¿‡ç¨‹å˜æˆçš„ç®€å•ï¼Œè®©æˆ‘ä»¬å°½æ—©ä½¿ç”¨èµ·æ¥å§ã€‚</p><h2 id="ä¸€äº›é”™è¯¯">ä¸€äº›é”™è¯¯</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">  File &quot;/usr/lib/python3.7/site-packages/pipenv/vendor/pythonfinder/models/python.py&quot;, line 70, in get_version_order</span><br><span class="line">    version_order = [versions[v] for v in parse_pyenv_version_order()]</span><br><span class="line">TypeError: &apos;NoneType&apos; object is not iterable</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è§£å†³:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyenv global 3.7.1</span><br></pre></td></tr></table></figure><blockquote><p><code>3.7.1æ¢æˆä½ ç”¨pyenvå®‰è£…è¿‡çš„ç¯å¢ƒ</code></p></blockquote>]]></content>
    
    <summary type="html">
    
      ä½¿ç”¨pipenvç®¡ç†pythoné¡¹ç›®
    
    </summary>
    
      <category term="Python" scheme="http://blog.breakering.com/categories/Python/"/>
    
    
      <category term="Python" scheme="http://blog.breakering.com/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>Djangoå¸¸è§é”™è¯¯è§£å†³åŠæ³•</title>
    <link href="http://blog.breakering.com/2018/11/19/django-errors/"/>
    <id>http://blog.breakering.com/2018/11/19/django-errors/</id>
    <published>2018-11-19T06:10:51.000Z</published>
    <updated>2018-12-12T10:42:07.247Z</updated>
    
    <content type="html"><![CDATA[<ol><li>ProgrammingError: relation â€œdefault_cache_tableâ€ does not exist</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">django.db.utils.ProgrammingError: relation &quot;default_cache_table&quot; does not exist</span><br><span class="line">LINE 1: SELECT cache_key, value, expires FROM &quot;default_cache_table&quot; WHERE ca...</span><br></pre></td></tr></table></figure><p>ç±»ä¼¼ä¸Šè¿°è¿™ç§é”™è¯¯ï¼Œå¯ä»¥ç”¨ä¸‹é¢è¿™å¥å‘½ä»¤è§£å†³:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py createcachetable</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      Djangoå¸¸è§é”™è¯¯è§£å†³åŠæ³•
    
    </summary>
    
      <category term="Django" scheme="http://blog.breakering.com/categories/Django/"/>
    
    
      <category term="Django" scheme="http://blog.breakering.com/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>PostgreSQLå…è®¸è¢«è¿œç¨‹è®¿é—®</title>
    <link href="http://blog.breakering.com/2018/11/19/postgresql-remote/"/>
    <id>http://blog.breakering.com/2018/11/19/postgresql-remote/</id>
    <published>2018-11-19T06:00:41.000Z</published>
    <updated>2018-12-12T06:49:11.243Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-ä¿®æ”¹postgresql-conf">1.ä¿®æ”¹postgresql.conf</h2><p><code>postgresql.conf</code>å­˜æ”¾ä½ç½®åœ¨<code>/etc/postgresql/9.x/main</code>ä¸‹ï¼Œè¿™é‡Œçš„<code>x</code>å–å†³äºä½ å®‰è£…PostgreSQLçš„ç‰ˆæœ¬å·ï¼Œç¼–è¾‘æˆ–æ·»åŠ ä¸‹é¢ä¸€è¡Œï¼Œä½¿PostgreSQLå¯ä»¥æ¥å—æ¥è‡ªä»»æ„IPçš„è¿æ¥è¯·æ±‚ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">listen_addresses = &apos;*&apos;</span><br></pre></td></tr></table></figure><h2 id="2-ä¿®æ”¹pg-hba-conf">2.ä¿®æ”¹pg_hba.conf</h2><p><code>ä¿®æ”¹pg_hba.conf</code>ä½ç½®ä¸<code>postgresql.conf</code>ç›¸åŒï¼Œè™½ç„¶ä¸Šé¢é…ç½®å…è®¸ä»»æ„åœ°å€è¿æ¥PostgreSQLï¼Œä½†æ˜¯è¿™åœ¨pgä¸­è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜éœ€åœ¨<code>pg_hba.conf</code>ä¸­é…ç½®æœåŠ¡ç«¯å…è®¸çš„è®¤è¯æ–¹å¼ã€‚ä»»æ„ç¼–è¾‘å™¨æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œç¼–è¾‘æˆ–æ·»åŠ ä¸‹é¢ä¸€è¡Œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># TYPE  DATABASE  USER  CIDR-ADDRESS  METHOD</span><br><span class="line">host  all  all 0.0.0.0/0 md5</span><br></pre></td></tr></table></figure><p>é»˜è®¤pgåªå…è®¸æœ¬æœºé€šè¿‡å¯†ç è®¤è¯ç™»å½•ï¼Œä¿®æ”¹ä¸ºä¸Šé¢å†…å®¹åå³å¯ä»¥å¯¹ä»»æ„IPè®¿é—®è¿›è¡Œå¯†ç éªŒè¯ã€‚å¯¹ç…§ä¸Šé¢çš„æ³¨é‡Šå¯ä»¥å¾ˆå®¹æ˜“ææ˜ç™½æ¯åˆ—çš„å«ä¹‰ï¼Œå…·ä½“çš„æ”¯æŒé¡¹å¯ä»¥æŸ¥é˜…æ–‡æœ«å‚è€ƒå¼•ç”¨ã€‚</p><p>å®Œæˆä¸Šä¸¤é¡¹é…ç½®åæ‰§è¡Œ<code>sudo service postgresql restart</code>é‡å¯PostgreSQLæœåŠ¡åï¼Œå…è®¸å¤–ç½‘è®¿é—®çš„é…ç½®å°±ç®—ç”Ÿæ•ˆäº†ã€‚</p>]]></content>
    
    <summary type="html">
    
      PostgreSQLå…è®¸è¢«è¿œç¨‹è®¿é—®
    
    </summary>
    
      <category term="PostgreSQL" scheme="http://blog.breakering.com/categories/PostgreSQL/"/>
    
    
      <category term="PostgreSQL" scheme="http://blog.breakering.com/tags/PostgreSQL/"/>
    
  </entry>
  
  <entry>
    <title>django-celeryå®ç°å®šæ—¶ä»»åŠ¡</title>
    <link href="http://blog.breakering.com/2018/11/16/django-celery/"/>
    <id>http://blog.breakering.com/2018/11/16/django-celery/</id>
    <published>2018-11-16T09:11:53.000Z</published>
    <updated>2018-12-12T06:46:59.925Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2><p>æˆ‘ä»¬çŸ¥é“celeryå¯ä»¥ç›´æ¥ç”¨åœ¨djangoé¡¹ç›®ä¸­ï¼Œä½†æ˜¯é…ç½®ç¨å¾®ç¹çï¼Œè¿˜æœ‰æ·»åŠ å®šæ—¶ä»»åŠ¡éœ€è¦é‡å¯celery beatè¿›ç¨‹ï¼Œå®åœ¨è›‹ç–¼ï¼Œå¥½åœ¨æ‰¾åˆ°äº†<code>django-celery</code>è¿™ä¸ªæ¨¡å—ï¼Œè¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬ç”¨èµ·æ¥å§ã€‚</p><h2 id="å®‰è£…å’Œé…ç½®">å®‰è£…å’Œé…ç½®</h2><p>å®‰è£…è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œç›´æ¥pipå³å¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django-clery</span><br></pre></td></tr></table></figure><blockquote><p>æ­¤æ—¶ä¼šå°†ä¸€äº›ä¾èµ–åº“ä¸€å¹¶å®‰è£…ï¼Œæ¯”å¦‚celeryç­‰</p></blockquote><p>æ¥ä¸‹æ¥æ˜¯djangoé¡¹ç›®ä¸­çš„é…ç½®ï¼Œåœ¨settingsä¸­é…ç½®å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># INSTALLED_APPSä¸­åŠ å…¥djcelery</span><br><span class="line">INSTALLED_APPS = [</span><br><span class="line">    ....</span><br><span class="line">    &apos;djcelery&apos;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"># é…ç½®djceleryç›¸å…³å‚æ•°ï¼ŒResultStoreé»˜è®¤å­˜å‚¨åœ¨æ•°æ®åº“å¯ä¸å¿…é‡å†™ ï¼Œ</span><br><span class="line">djcelery.setup_loader()</span><br><span class="line">BROKER_URL = &apos;redis://127.0.0.1:6379/8&apos;  # é…ç½®ä½ çš„redisåœ°å€å’Œåº“</span><br><span class="line"># ä½¿ç”¨å’ŒDjangoä¸€æ ·çš„æ—¶åŒº</span><br><span class="line">CELERY_TIMEZONE = TIME_ZONE</span><br><span class="line"></span><br><span class="line"># ä»¥ä¸Šä¸ºåŸºæœ¬é…ç½®ï¼Œä»¥ä¸‹ä¸ºå‘¨æœŸæ€§ä»»åŠ¡å®šä¹‰</span><br><span class="line">CELERYBEAT_SCHEDULER = &apos;djcelery.schedulers.DatabaseScheduler&apos;</span><br></pre></td></tr></table></figure><p>åŒæ­¥æ•°æ®åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py migrate</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºtask">åˆ›å»ºtask</h2><p>åœ¨ä½ çš„appä¸‹é¢åˆ›å»ºä¸€ä¸ª<code>tasks.py</code>æ–‡ä»¶ï¼Œæ–‡ä»¶åå¿…é¡»ä¸€è‡´ï¼Œ<code>django-celery</code>é»˜è®¤æƒ…å†µä¸‹ä¼šè‡ªåŠ¨ä»å„ä¸ªappä¸­å¯»æ‰¾è¯¥æ¨¡å—ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> celery <span class="keyword">import</span> task</span><br><span class="line"></span><br><span class="line"><span class="meta">@task()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_msg</span><span class="params">(msg)</span>:</span></span><br><span class="line">    print(msg)</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼štaskè£…é¥°å™¨çš„<code>name</code>å‚æ•°æœ€å¥½å’Œå‡½æ•°åä¸€è‡´æˆ–è€…å¹²è„†ä¸æŒ‡å®š;æœ€å¥½ä¸æŒ‡å®šï¼Œè¿™æ ·ä¸‹æ–¹åˆ†å‘ä»»åŠ¡æ—¶å¥½ç»Ÿä¸€å¤„ç†ã€‚</p></blockquote><h2 id="åˆ›å»ºå®šæ—¶ä»»åŠ¡">åˆ›å»ºå®šæ—¶ä»»åŠ¡</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥åœ¨Django adminä¸­åˆ›å»ºå®šæ—¶ä»»åŠ¡äº†</p><p><img src="/images/2018-11-16/QQ20170613-215907.jpg" alt=""><br><img src="/images/2018-11-16/QQ20170613-220348.jpg" alt=""></p><h2 id="å¯åŠ¨beatå’Œworker">å¯åŠ¨beatå’Œworker</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py celery worker -l info</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py celery beat</span><br></pre></td></tr></table></figure><p>ä¹‹åå°±å¯ä»¥è§‚å¯Ÿæ—¥å¿—äº†ï¼Œå¦å¤–å¯ä»¥ä½¿ç”¨<code>supervisor</code>æ¥ç®¡ç†è¿™ä¸¤ä¸ªè¿›ç¨‹ã€‚</p><h2 id="åˆ©ç”¨queueåˆ†å‘ä»»åŠ¡">åˆ©ç”¨queueåˆ†å‘ä»»åŠ¡</h2><p>åœ¨settingsä¸­å¢åŠ å¦‚ä¸‹é…ç½®:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># å®šä¹‰ä»»åŠ¡å¯¹åº”çš„queue</span><br><span class="line">class TasksRouter(object):</span><br><span class="line">    @classmethod</span><br><span class="line">    def route_for_task(cls, task, args=None, kwargs=None):</span><br><span class="line">        task_routes = &#123;</span><br><span class="line">            &apos;algorithm.product.tasks.*&apos;: &#123;&apos;queue&apos;: &apos;product&apos;&#125;,</span><br><span class="line">            &apos;algorithm.material.tasks.*&apos;: &#123;&apos;queue&apos;: &apos;material&apos;&#125;,</span><br><span class="line">        &#125;</span><br><span class="line">        for route_key in task_routes:</span><br><span class="line">            if re.search(route_key, task):</span><br><span class="line">                return task_routes[route_key]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">CELERY_ROUTES = (TasksRouter(), )</span><br></pre></td></tr></table></figure><p>é…ç½®å®Œæˆä¹‹åï¼Œå¯åŠ¨beatå’Œworker</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py celery beat</span><br></pre></td></tr></table></figure><p>beatä¼šå®æ—¶æ£€æµ‹ä»»åŠ¡çš„å˜åŒ–ï¼Œåœ¨django adminç•Œé¢å¯¹ä»»åŠ¡è¿›è¡Œæ“ä½œï¼Œå‡ä¼šåˆ·æ–°è¯¥è¿›ç¨‹ï¼Œä½¿å¾—åˆ†æ´¾ä»»åŠ¡å˜å¾—éå¸¸ç®€å•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py celery worker -Q product</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°å‘½ä»¤å¯åŠ¨çš„workeråªä¼šç›‘æµ‹å¹¶æ‰§è¡Œ<code>product</code>è¿™ä¸ªqueueä¸­çš„ä»»åŠ¡ï¼Œå³åªæ‰§è¡Œ<code>algorithm.product.tasks</code>ä¸‹é¢çš„ä»»åŠ¡ã€‚åŒç†<code>python manage.py celery worker -Q material</code>åªæ‰§è¡Œ<code>algorithm.material.tasks</code>ä¸‹é¢çš„ä»»åŠ¡ã€‚</p><p>å¦å¤–queueå¯ä»¥æ·»åŠ å¤šä¸ª,ä¾‹å¦‚<code>python manage.py celery worker -Q product,material</code>ã€‚</p><p>è‹¥è¦ä¸åŒºåˆ†queueæ‰§è¡Œæ‰€æœ‰ä»»åŠ¡ï¼Œåªéœ€<code>python manage.py celery worker</code>å³å¯,ä½†ä¸æ¨è,å¼€å¯ä»»åŠ¡åˆ†å‘ä¹‹åï¼Œæœ€å¥½åˆ†å¼€æ‰§è¡Œï¼Œæ—¥å¿—æ–¹é¢ä¹Ÿæ›´å¥½æ’æŸ¥ã€‚</p>]]></content>
    
    <summary type="html">
    
      ä½¿ç”¨django-celeryå®ç°å®šæ—¶ä»»åŠ¡ï¼Œå¯ä»¥ä¸ç”¨é‡å¯celery beatè¿›ç¨‹
    
    </summary>
    
      <category term="Django" scheme="http://blog.breakering.com/categories/Django/"/>
    
    
      <category term="Django" scheme="http://blog.breakering.com/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>Linuxåœ¨å±€åŸŸç½‘å¦‚ä½•é€šè¿‡hostnameè·å–å…¶ip</title>
    <link href="http://blog.breakering.com/2018/11/16/linux-hostname_to_ip/"/>
    <id>http://blog.breakering.com/2018/11/16/linux-hostname_to_ip/</id>
    <published>2018-11-16T09:02:52.000Z</published>
    <updated>2018-12-12T06:49:10.963Z</updated>
    
    <content type="html"><![CDATA[<h3 id="åªéœ€è¦hostnameå›ºå®š-å°±å¯ä»¥åœ¨å±€åŸŸç½‘é€šè¿‡ping-hostname-localæ¥è·å–å…¶ip">åªéœ€è¦hostnameå›ºå®šï¼Œå°±å¯ä»¥åœ¨å±€åŸŸç½‘é€šè¿‡ping hostname.localæ¥è·å–å…¶ip</h3><p><img src="/images/2018-11-16/1046366-20181009112517884-381181059.png" alt=""></p>]]></content>
    
    <summary type="html">
    
      Linuxåœ¨å±€åŸŸç½‘å¦‚ä½•é€šè¿‡hostnameè·å–å…¶ip
    
    </summary>
    
      <category term="Linux" scheme="http://blog.breakering.com/categories/Linux/"/>
    
    
      <category term="Linux" scheme="http://blog.breakering.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨Djangoä¸­å®ç°querysetçº§åˆ«ç¼“å­˜</title>
    <link href="http://blog.breakering.com/2018/11/16/django-queryset-cache/"/>
    <id>http://blog.breakering.com/2018/11/16/django-queryset-cache/</id>
    <published>2018-11-16T03:50:19.000Z</published>
    <updated>2018-12-12T06:50:10.860Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2><p>å®ç°querysetçº§åˆ«çš„ç¼“å­˜ï¼Œä¸æ˜¯viewå±‚é¢çš„ï¼Œç›¸å½“äºç¼“å­˜sqlæŸ¥è¯¢ç»“æœã€‚</p><h2 id="ä½¿ç”¨">ä½¿ç”¨</h2><h3 id="é¦–å…ˆåœ¨ä½ çš„djangoé¡¹ç›®ä¸­å®‰è£…ä¾èµ–çš„æ¨¡å—">é¦–å…ˆåœ¨ä½ çš„djangoé¡¹ç›®ä¸­å®‰è£…ä¾èµ–çš„æ¨¡å—</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django-cache-machine</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºqueryset-cache-pyæ–‡ä»¶-æ–‡ä»¶å†…å®¹å¦‚ä¸‹">åˆ›å»ºqueryset_cache.pyæ–‡ä»¶,æ–‡ä»¶å†…å®¹å¦‚ä¸‹</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># __author__ = "Breakering"</span></span><br><span class="line"><span class="comment"># Date: 18-8-29</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">ä¾èµ–django-cache-machineï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº†è½»æ¾åˆ‡æ¢ä½¿ç”¨querysetçº§åˆ«ç¼“å­˜ä»¥åŠcountç­‰ç¼“å­˜</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> contextlib</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> caching <span class="keyword">import</span> config</span><br><span class="line"><span class="keyword">from</span> caching.base <span class="keyword">import</span> CachingQuerySet, cached_with</span><br><span class="line"><span class="keyword">from</span> django.db.models.sql <span class="keyword">import</span> query</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queryset_cache_decorator</span><span class="params">(always_cached=True)</span>:</span></span><br><span class="line">    <span class="string">"""querysetçº§åˆ«ç¼“å­˜çš„è£…é¥°å™¨ï¼Œå¯ä»¥ä½¿å¾—querysetç›´æ¥ä»ç¼“å­˜ä¸­è·å–æ•°æ®"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(func)</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(self, *args, **kwargs)</span>:</span></span><br><span class="line">            queryset = func(self, *args, **kwargs)</span><br><span class="line">            <span class="keyword">if</span> always_cached:  <span class="comment"># æ­¤è£…é¥°å™¨é»˜è®¤ä»cacheä¸­è·å–æ•°æ®</span></span><br><span class="line">                queryset = queryset.from_cache()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">with</span> contextlib.suppress(Exception):</span><br><span class="line">                    queryset_cache_time = self.request.query_params.get(<span class="string">'queryset_cache_time'</span>, <span class="string">''</span>)</span><br><span class="line">                    <span class="keyword">if</span> queryset_cache_time <span class="keyword">and</span> queryset_cache_time.isdigit():</span><br><span class="line">                        queryset = queryset.from_cache(int(queryset_cache_time))</span><br><span class="line">            <span class="keyword">return</span> queryset</span><br><span class="line">        <span class="keyword">return</span> inner</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">queryset_cache_count_decorator</span><span class="params">(always_cached=True)</span>:</span></span><br><span class="line">    <span class="string">"""queryset countç¼“å­˜çš„è£…é¥°å™¨ï¼Œå¯ä»¥ä½¿å¾—querysetç›´æ¥ä»ç¼“å­˜ä¸­è·å–countçš„å€¼"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(func)</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(self, *args, **kwargs)</span>:</span></span><br><span class="line">            queryset = func(self, *args, **kwargs)</span><br><span class="line">            <span class="keyword">if</span> always_cached:  <span class="comment"># æ­¤è£…é¥°å™¨é»˜è®¤ä»cacheä¸­è·å–æ•°æ®</span></span><br><span class="line">                queryset = queryset.cache_count()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">with</span> contextlib.suppress(Exception):</span><br><span class="line">                    queryset_cache_time = self.request.query_params.get(<span class="string">'queryset_cache_time'</span>, <span class="string">''</span>)</span><br><span class="line">                    <span class="keyword">if</span> queryset_cache_time <span class="keyword">and</span> queryset_cache_time.isdigit():</span><br><span class="line">                        queryset = queryset.cache_count(int(queryset_cache_time))</span><br><span class="line">            <span class="keyword">return</span> queryset</span><br><span class="line">        <span class="keyword">return</span> inner</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CachedQuerySet</span><span class="params">(CachingQuerySet)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    Return queryset from cache if query_key in cache</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, *args, **kwargs)</span>:</span></span><br><span class="line">        super(CachedQuerySet, self).__init__(*args, **kwargs)</span><br><span class="line">        self.timeout = config.NO_CACHE  <span class="comment"># é»˜è®¤ç›´æ¥ä»æ•°æ®åº“å–æ•°æ®</span></span><br><span class="line">        self.cache_count_timeout = config.NO_CACHE  <span class="comment"># è‡ªå®šä¹‰queryset countçš„ç¼“å­˜æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_clone</span><span class="params">(self, *args, **kw)</span>:</span></span><br><span class="line">        qs = super(CachedQuerySet, self)._clone(*args, **kw)</span><br><span class="line">        qs.cache_count_timeout = self.cache_count_timeout</span><br><span class="line">        <span class="keyword">return</span> qs</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">from_cache</span><span class="params">(self, timeout=<span class="number">60</span>*<span class="number">60</span>)</span>:</span></span><br><span class="line">        <span class="string">"""åœ¨querysetä¸­è°ƒç”¨æ­¤å‡½æ•°åˆ™æ˜¯ä»ç¼“å­˜ä¸­è·å–,ä¸”è°ƒç”¨ä¹‹åè¿”å›çš„ä»æ˜¯queryset"""</span></span><br><span class="line">        self.timeout = timeout</span><br><span class="line">        <span class="keyword">return</span> self._clone()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">cache_count</span><span class="params">(self, cache_count_timeout=<span class="number">60</span>*<span class="number">60</span>)</span>:</span></span><br><span class="line">        <span class="string">"""å®ç°queryset countçš„ç¼“å­˜,ä¸”è°ƒç”¨ä¹‹åè¿”å›çš„ä»æ˜¯queryset"""</span></span><br><span class="line">        self.cache_count_timeout = cache_count_timeout</span><br><span class="line">        <span class="keyword">return</span> self._clone()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># todo valuesç›®å‰çš„å®ç°æ–¹å¼æœ‰BUGï¼Œç°å·²å–æ¶ˆ</span></span><br><span class="line">    <span class="comment"># def values(self, *fields, **expressions):</span></span><br><span class="line">    <span class="comment">#     """rewrite queryset's values"""</span></span><br><span class="line">    <span class="comment">#     if self.timeout == config.NO_CACHE:  # é»˜è®¤æƒ…å†µä¸‹valuesç›´æ¥ä»æ•°æ®åº“è·å–æ•°æ®</span></span><br><span class="line">    <span class="comment">#         return super(CachedQuerySet, self).values(*fields, **expressions)</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#     clone = self._clone()</span></span><br><span class="line">    <span class="comment">#     clone.query.set_values(fields)</span></span><br><span class="line">    <span class="comment">#     key = make_key('values:&#123;key&#125;'.format(key=clone.query_key()))</span></span><br><span class="line">    <span class="comment">#     val = cache.get(key)</span></span><br><span class="line">    <span class="comment">#     if val is None:</span></span><br><span class="line">    <span class="comment">#         val = super(CachedQuerySet, self).values(*fields, **expressions)</span></span><br><span class="line">    <span class="comment">#         cache.set(key, val, self.timeout)</span></span><br><span class="line">    <span class="comment">#     return val</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">count</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""è‡ªå®šä¹‰querysetçš„count"""</span></span><br><span class="line">        super_count = super(CachingQuerySet, self).count</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            query_string = <span class="string">'count:%s'</span> % self.query_key()</span><br><span class="line">        <span class="keyword">except</span> query.EmptyResultSet:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> self.cache_count_timeout:</span><br><span class="line">            <span class="keyword">return</span> cached_with(self, super_count, query_string, self.cache_count_timeout)</span><br><span class="line">        <span class="keyword">elif</span> self.timeout == config.NO_CACHE <span class="keyword">or</span> config.TIMEOUT == config.NO_CACHE:</span><br><span class="line">            <span class="keyword">return</span> super_count()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> cached_with(self, super_count, query_string, config.TIMEOUT)</span><br></pre></td></tr></table></figure><h3 id="æ”¹é€ æ‚¨çš„model">æ”¹é€ æ‚¨çš„model</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"><span class="keyword">from</span> queryset_cache <span class="keyword">import</span> CachedQuerySet</span><br><span class="line"><span class="keyword">from</span> caching.base <span class="keyword">import</span> CachingMixin</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModelClassManger</span><span class="params">(models.Manager)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_queryset</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> CachedQuerySet(self.model)</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModelClass</span><span class="params">(CachingMixin, models.Model)</span>:</span></span><br><span class="line">    objects = ModelClassManger()</span><br></pre></td></tr></table></figure><h3 id="viewå±‚åªéœ€åœ¨get-querysetä¸ŠåŠ ä¸Šè£…é¥°å™¨å³å¯">viewå±‚åªéœ€åœ¨get_querysetä¸ŠåŠ ä¸Šè£…é¥°å™¨å³å¯</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@queryset_cache_count_decorator()</span></span><br><span class="line"><span class="meta">@queryset_cache_decorator()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_queryset</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ·»åŠ äº†always_cached=False</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@queryset_cache_count_decorator(always_cached=False)</span></span><br><span class="line"><span class="meta">@queryset_cache_decorator(always_cached=False)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_queryset</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>åˆ™éœ€è¦åœ¨queryå‚æ•°ä¸­åŠ ä¸Šqueryset_cache_time=180,å‚æ•°åé¢çš„æ•°å­—å³ä¸ºç¼“å­˜çš„æ—¶é—´ã€‚</p>]]></content>
    
    <summary type="html">
    
      djangoä¸­å®ç°querysetçº§åˆ«ç¼“å­˜
    
    </summary>
    
      <category term="Django" scheme="http://blog.breakering.com/categories/Django/"/>
    
    
      <category term="Django" scheme="http://blog.breakering.com/tags/Django/"/>
    
  </entry>
  
  <entry>
    <title>HexoåŒæ­¥</title>
    <link href="http://blog.breakering.com/2018/11/15/hexo-sync/"/>
    <id>http://blog.breakering.com/2018/11/15/hexo-sync/</id>
    <published>2018-11-15T07:27:52.000Z</published>
    <updated>2018-12-12T06:49:11.007Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¯å¢ƒæ­å»º">ç¯å¢ƒæ­å»º</h2><h3 id="å®‰è£…node-js">å®‰è£…Node.js</h3><p>ç”¨æ¥ç”Ÿæˆé™æ€é¡µé¢, åˆ°<a href="https://nodejs.org/en/" target="_blank" rel="noopener">Node.jså®˜ç½‘</a>ï¼Œä¸‹è½½æœ€æ–°ç‰ˆæœ¬, æ ¹æ®æç¤ºä¸€è·¯å®‰è£…å³å¯</p><h3 id="å®‰è£…git">å®‰è£…Git</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…hexo">å®‰è£…Hexo</h3><p>å½“Node.jså’ŒGitéƒ½å®‰è£…å¥½åå°±å¯ä»¥æ­£å¼å®‰è£…Hexoäº†ï¼Œç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g hexo</span><br></pre></td></tr></table></figure><h3 id="å…‹éš†hexoåˆ†æ”¯">å…‹éš†hexoåˆ†æ”¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b hexo https://github.com/Breakering/breakering.github.io.git</span><br></pre></td></tr></table></figure><h3 id="è¿›å…¥breakering-github-io-git">è¿›å…¥breakering.github.io.git</h3><p>åˆ›å»ºåšå®¢</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo n &apos;åšå®¢å&apos;</span><br></pre></td></tr></table></figure><p>å‘è¡¨åšå®¢</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d -g</span><br></pre></td></tr></table></figure><h3 id="ä¸»é¢˜é…ç½®æ›´æ–°ç›¸å…³">ä¸»é¢˜é…ç½®æ›´æ–°ç›¸å…³</h3><p>éœ€è¦å…ˆæ¸…ç©ºç¼“å­˜</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure><p>ç„¶åè¿›è¡Œéƒ¨ç½²æ“ä½œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d -g</span><br></pre></td></tr></table></figure><h3 id="ä¸€äº›é—®é¢˜">ä¸€äº›é—®é¢˜</h3><ol><li>æŠ¥é”™ä¸€: è‹¥æ‰§è¡Œå‘½ä»¤hexo deployä»ç„¶æŠ¥é”™ï¼šæ— æ³•è¿æ¥gitæˆ–æ‰¾ä¸åˆ°gitï¼Œåˆ™æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥å®‰è£…hexo-deployer-gitï¼š</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><ol start="2"><li>æŠ¥é”™äºŒ: è‹¥æ‰§è¡Œå‘½ä»¤hexo dæŠ¥ä»¥ä¸‹é”™è¯¯:</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ERROR Plugin load failed: hexo-server </span><br><span class="line">//æˆ–è€…ç±»ä¼¼çš„é”™è¯¯ </span><br><span class="line">ERROR Plugin load failed: hexo-renderer-sass</span><br></pre></td></tr></table></figure><p>åˆ™æ‰§è¡Œå“åº”çš„å‘½ä»¤:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install hexo-server</span><br><span class="line">//æˆ–è€…</span><br><span class="line">sudo npm install hexo-renderer-sass</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      å…¶ä»–ç”µè„‘åŒæ­¥åšå®¢çš„æ–¹æ³•!
    
    </summary>
    
      <category term="Hexo" scheme="http://blog.breakering.com/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="http://blog.breakering.com/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hexoåˆè¯†</title>
    <link href="http://blog.breakering.com/2018/09/28/hexo-start/"/>
    <id>http://blog.breakering.com/2018/09/28/hexo-start/</id>
    <published>2018-09-28T12:58:27.000Z</published>
    <updated>2018-12-12T06:46:59.893Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="quick-start">Quick Start</h2><h3 id="create-a-new-post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="run-server">Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="generate-static-files">Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="deploy-to-remote-sites">Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      ç®€å•ä»‹ç»hexoçš„ç”¨æ³•.
    
    </summary>
    
      <category term="Hexo" scheme="http://blog.breakering.com/categories/Hexo/"/>
    
    
      <category term="Hexo" scheme="http://blog.breakering.com/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>å†…ç½‘ç©¿é€frp</title>
    <link href="http://blog.breakering.com/2018/09/28/frp/"/>
    <id>http://blog.breakering.com/2018/09/28/frp/</id>
    <published>2018-09-28T12:58:27.000Z</published>
    <updated>2018-12-12T06:50:10.972Z</updated>
    
    <content type="html"><![CDATA[<h1>ä¸€ã€å†…ç½‘ç©¿é€åŸç†</h1><p>ç®€å•åœ°è¯´ï¼Œå†…ç½‘ç©¿é€ä¾èµ–äº NAT åŸç†ï¼Œæ ¹æ® NAT è®¾å¤‡ä¸åŒå¤§è‡´å¯åˆ†ä¸ºä»¥ä¸‹ 4 å¤§ç±»(å‰3ç§NATç±»å‹å¯ç»Ÿç§°ä¸ºconeç±»å‹)ï¼š</p><ul><li>å…¨å…‹éš†(Full Cone)ï¼šNAT æŠŠæ‰€æœ‰æ¥è‡ªç›¸åŒå†…éƒ¨ IP åœ°å€å’Œç«¯å£çš„è¯·æ±‚æ˜ å°„åˆ°ç›¸åŒçš„å¤–éƒ¨ IP åœ°å€å’Œç«¯å£ä¸Šï¼Œä»»ä½•ä¸€ä¸ªå¤–éƒ¨ä¸»æœºå‡å¯é€šè¿‡è¯¥æ˜ å°„åå‘å‘é€ IP åŒ…åˆ°è¯¥å†…éƒ¨ä¸»æœº</li><li>é™åˆ¶æ€§å…‹éš†(Restricted Cone)ï¼šNAT æŠŠæ‰€æœ‰æ¥è‡ªç›¸åŒå†…éƒ¨ IP åœ°å€å’Œç«¯å£çš„è¯·æ±‚æ˜ å°„åˆ°ç›¸åŒçš„å¤–éƒ¨ IP åœ°å€å’Œç«¯å£ï¼›ä½†æ˜¯ï¼Œåªæœ‰å½“å†…éƒ¨ä¸»æœºå…ˆç»™ IP åœ°å€ä¸º X çš„å¤–éƒ¨ä¸»æœºå‘é€ IP åŒ…æ—¶ï¼Œè¯¥å¤–éƒ¨ä¸»æœºæ‰èƒ½å‘è¯¥å†…éƒ¨ä¸»æœºå‘é€ IP åŒ…</li><li>ç«¯å£é™åˆ¶æ€§å…‹éš†(Port Restricted Cone)ï¼šç«¯å£é™åˆ¶æ€§å…‹éš†ä¸é™åˆ¶æ€§å…‹éš†ç±»ä¼¼ï¼Œåªæ˜¯å¤šäº†ç«¯å£å·çš„é™åˆ¶ï¼Œå³åªæœ‰å†…éƒ¨ä¸»æœºå…ˆå‘ IP åœ°å€ä¸º Xï¼Œç«¯å£å·ä¸º P çš„å¤–éƒ¨ä¸»æœºå‘é€1ä¸ª IP åŒ…,è¯¥å¤–éƒ¨ä¸»æœºæ‰èƒ½å¤ŸæŠŠæºç«¯å£å·ä¸º P çš„ IP åŒ…å‘é€ç»™è¯¥å†…éƒ¨ä¸»æœº</li><li>å¯¹ç§°å¼NAT(Symmetric NAT)ï¼šè¿™ç§ç±»å‹çš„ NAT ä¸ä¸Šè¿°3ç§ç±»å‹çš„ä¸åŒï¼Œåœ¨äºå½“åŒä¸€å†…éƒ¨ä¸»æœºä½¿ç”¨ç›¸åŒçš„ç«¯å£ä¸ä¸åŒåœ°å€çš„å¤–éƒ¨ä¸»æœºè¿›è¡Œé€šä¿¡æ—¶ï¼Œ NAT å¯¹è¯¥å†…éƒ¨ä¸»æœºçš„æ˜ å°„ä¼šæœ‰æ‰€ä¸åŒï¼›å¯¹ç§°å¼ NAT ä¸ä¿è¯æ‰€æœ‰ä¼šè¯ä¸­çš„ç§æœ‰åœ°å€å’Œå…¬å¼€ IP ä¹‹é—´ç»‘å®šçš„ä¸€è‡´æ€§ï¼›ç›¸åï¼Œå®ƒä¸ºæ¯ä¸ªæ–°çš„ä¼šè¯åˆ†é…ä¸€ä¸ªæ–°çš„ç«¯å£å·ï¼›å¯¼è‡´æ­¤ç§ NAT æ ¹æœ¬æ²¡æ³•ç©¿é€</li></ul><p>å†…ç½‘ç©¿é€çš„ä½œç”¨å°±æ˜¯åˆ©ç”¨ä»¥ä¸Šè§„åˆ™ï¼Œåˆ›å»ºä¸€æ¡ä»å¤–éƒ¨æœåŠ¡å™¨åˆ°å†…éƒ¨è®¾å¤‡çš„ â€œéš§é“â€ï¼Œå…·ä½“çš„ NAT åŸç†ç­‰å¯å‚è€ƒ å†…ç½‘æ‰“æ´ã€ç½‘ç»œåœ°å€è½¬æ¢NATåŸç†ã€‚</p><h1>äºŒã€ç¯å¢ƒå‡†å¤‡</h1><p>å®é™…ä¸Šæ ¹æ®ä»¥ä¸Š NAT è§„åˆ™ï¼ŒåŸºæœ¬ä¸Šå¤§éƒ¨åˆ†å®¶ç”¨è®¾å¤‡å’Œè¿è¥å•†ä¸Šçº§è·¯ç”±ç­‰éƒ½åœ¨å‰ä¸‰ç§è§„åˆ™ä¹‹ä¸­ï¼Œæ‰€ä»¥åªéœ€è¦å€ŸåŠ©æˆç†Ÿçš„å†…ç½‘ç©¿é€å·¥å…·å³å¯ï¼Œä»¥ä¸‹ä¸ºæœ¬æ¬¡ç©¿é€ç¯å¢ƒ</p><ul><li>æœ€æ–°ç‰ˆæœ¬ frp</li><li>ä¸€å°å…¬ç½‘ VPS æœåŠ¡å™¨</li><li>å†…ç½‘ä¸€å°æœåŠ¡å™¨ï¼Œæœ€å¥½ Linux ç³»ç»Ÿ</li></ul><h1>ä¸‰ã€æœåŠ¡ç«¯æ­å»º</h1><p>æœåŠ¡å™¨ä½œä¸ºå…¬ç½‘è®¿é—®å”¯ä¸€çš„å›ºå®šåœ°å€ï¼Œå³ä½œä¸º server ç«¯ï¼›å†…ç½‘å®¢æˆ·ç«¯ä½œä¸º client ç«¯ï¼Œä¼šä¸»åŠ¨å‘ server ç«¯åˆ›å»ºè¿æ¥ï¼Œæ­¤æ—¶å†ä» server ç«¯åå‘å‘é€æ•°æ®å³å¯å®ç°å†…ç½‘ç©¿é€</p><h2 id="3-1-ä¸‹è½½å¹¶è§£å‹frp">3.1). ä¸‹è½½å¹¶è§£å‹frp</h2><p>å¯ä»¥æŸ¥çœ‹<a href="https://github.com/fatedier/frp/releases" target="_blank" rel="noopener">releases</a>è·å–æœ€æ–°çš„ç‰ˆæœ¬,é€‰å¥½ç‰ˆæœ¬ä¹‹åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/fatedier/frp/releases/download/v0.21.0/frp_0.21.0_linux_amd64.tar.gz</span><br><span class="line">tar -zxvf frp_0.21.0_linux_amd64.tar.gz</span><br><span class="line">cd frp_0.21.0_linux_amd64</span><br></pre></td></tr></table></figure><h2 id="3-2-ç¼–è¾‘frps-ini">3.2). ç¼–è¾‘frps.ini</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[common]                                                                                                                                                                                                </span><br><span class="line"># frp ç›‘å¬åœ°å€</span><br><span class="line">bind_addr = 0.0.0.0</span><br><span class="line">bind_port = 7000</span><br><span class="line"></span><br><span class="line"># å¦‚æœéœ€è¦ä»£ç† web(http) æœåŠ¡ï¼Œåˆ™å¼€å¯æ­¤ç«¯å£</span><br><span class="line">vhost_http_port = 8080</span><br><span class="line">vhost_https_port = 4443</span><br><span class="line"></span><br><span class="line"># frp æ§åˆ¶é¢æ¿</span><br><span class="line">dashboard_port = 7500</span><br><span class="line">dashboard_user = user</span><br><span class="line">dashboard_pwd = pwd</span><br><span class="line"></span><br><span class="line"># é»˜è®¤æ—¥å¿—è¾“å‡ºä½ç½®(è¿™é‡Œè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º)</span><br><span class="line">log_file = /tmp/frps.log</span><br><span class="line"># æ—¥å¿—çº§åˆ«ï¼Œæ”¯æŒ: debug, info, warn, error</span><br><span class="line">log_level = info</span><br><span class="line">log_max_days = 3</span><br><span class="line"></span><br><span class="line"># æ˜¯å¦å¼€å¯ç‰¹æƒæ¨¡å¼(ç‰¹æƒæ¨¡å¼ä¸‹ï¼Œå®¢æˆ·ç«¯æ›´æ”¹é…ç½®æ— éœ€æ›´æ–°æœåŠ¡ç«¯)</span><br><span class="line">privilege_mode = true</span><br><span class="line"># æˆæƒ token å»ºè®®éšæœºç”Ÿæˆ</span><br><span class="line">privilege_token = cc23*********************d072734</span><br><span class="line"># ç‰¹æƒæ¨¡å¼ä¸‹å…è®¸åˆ†é…çš„ç«¯å£(é¿å…ç«¯å£æ»¥ç”¨)</span><br><span class="line">privilege_allow_ports = 4000-50000</span><br><span class="line"></span><br><span class="line"># åç«¯è¿æ¥æ± æœ€å¤§è¿æ¥æ•°é‡</span><br><span class="line">max_pool_count = 100</span><br><span class="line"></span><br><span class="line"># å£ä»¤è¶…æ—¶æ—¶é—´</span><br><span class="line">authentication_timeout = 900</span><br><span class="line"></span><br><span class="line"># å­åŸŸå(ç‰¹æƒæ¨¡å¼ä¸‹å°† *.xxxx.com è§£æåˆ°å…¬ç½‘æœåŠ¡å™¨)</span><br><span class="line">subdomain_host = xxxx.com</span><br></pre></td></tr></table></figure><p><strong>å…¶ä»–å…·ä½“é…ç½®è¯´æ˜è¯·å‚è€ƒ<a href="https://github.com/fatedier/frp/blob/master/README_zh.md" target="_blank" rel="noopener">frp README</a> æ–‡æ¡£</strong></p><h2 id="3-3-å¯åŠ¨frp-server">3.3). å¯åŠ¨frp server</h2><p>è®¾ç½®å®Œæˆåæ‰§è¡Œ ./frps -c frps.ini å¯åŠ¨å³å¯</p><p><strong>ps:å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨supervisoræ¥ç®¡ç†</strong></p><h1>å››ã€å®¢æˆ·ç«¯é…ç½®</h1><p>å®¢æˆ·ç«¯ä½œä¸ºå‘èµ·é“¾æ¥çš„ä¸»åŠ¨æ–¹ï¼Œåªéœ€è¦æ­£ç¡®é…ç½®æœåŠ¡å™¨åœ°å€ï¼Œä»¥åŠè¦æ˜ å°„å®¢æˆ·ç«¯çš„å“ªäº›æœåŠ¡ç«¯å£ç­‰å³å¯</p><h2 id="4-1-ä¸‹è½½å¹¶è§£å‹frp">4.1). ä¸‹è½½å¹¶è§£å‹frp</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/fatedier/frp/releases/download/v0.21.0/frp_0.21.0_linux_amd64.tar.gz</span><br><span class="line">tar -zxvf frp_0.21.0_linux_amd64.tar.gz</span><br><span class="line">cd frp_0.21.0_linux_amd64</span><br></pre></td></tr></table></figure><h2 id="4-2-ç¼–è¾‘frpc-ini">4.2). ç¼–è¾‘frpc.ini</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">server_addr = 127.0.0.1</span><br><span class="line">server_port = 7000</span><br><span class="line"># console or real logFile path like ./frpc.log</span><br><span class="line">log_file = /tmp/frpc.log</span><br><span class="line"></span><br><span class="line"># debug, info, warn, error</span><br><span class="line">log_level = debug</span><br><span class="line"></span><br><span class="line">log_max_days = 3</span><br><span class="line"></span><br><span class="line"># ç‰¹æƒæ¨¡å¼ï¼Œè¦å’ŒæœåŠ¡å™¨ç«¯çš„é…ç½®ä¸€è‡´</span><br><span class="line">privilege_token = cc23*********************d072734</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[gitlab]</span><br><span class="line">type = http</span><br><span class="line">local_port = 8080</span><br><span class="line">subdomain = gitlab  # è¿™æ ·åªè¦è®¿é—®http://gitlab.xxxx.com:8080å³å¯è®¿é—®åˆ°è¯¥å®¢æˆ·ç«¯çš„gitlabæœåŠ¡</span><br><span class="line">use_gzip = true</span><br><span class="line"></span><br><span class="line">[gitlab_static_file]</span><br><span class="line">type = tcp</span><br><span class="line">remote_port = 8082</span><br><span class="line">plugin = static_file</span><br><span class="line"># è¦å¯¹å¤–æš´éœ²çš„æ–‡ä»¶ç›®å½•</span><br><span class="line">plugin_local_path = /opt/gitlab/embedded/service/gitlab-rails/public/assets/</span><br><span class="line"># è®¿é—® url ä¸­ä¼šè¢«å»é™¤çš„å‰ç¼€ï¼Œä¿ç•™çš„å†…å®¹å³ä¸ºè¦è®¿é—®çš„æ–‡ä»¶è·¯å¾„</span><br><span class="line">plugin_strip_prefix = assets</span><br><span class="line">#plugin_http_user = abc</span><br><span class="line">#plugin_http_passwd = abc</span><br><span class="line"></span><br><span class="line">[gitlab_ssh]</span><br><span class="line">type = tcp </span><br><span class="line">local_ip = 127.0.0.1</span><br><span class="line">local_port = 22</span><br><span class="line">remote_port = 8081</span><br></pre></td></tr></table></figure><p><strong>å…¶ä»–å…·ä½“é…ç½®è¯´æ˜è¯·å‚è€ƒ<a href="https://github.com/fatedier/frp/blob/master/README_zh.md" target="_blank" rel="noopener">frp README</a> æ–‡æ¡£</strong></p><h2 id="4-3-å¯åŠ¨frp-client">4.3). å¯åŠ¨frp client</h2><p>è®¾ç½®å®Œæˆåæ‰§è¡Œ ./frpc -c frpc.ini å¯åŠ¨å³å¯</p><p><strong>ps:å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨supervisoræ¥ç®¡ç†</strong></p><h1>äº”ã€æµ‹è¯•</h1><p>æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åŒæ—¶å¼€å¯å®Œæˆåï¼Œå³å¯è®¿é—® <a href="http://127.0.0.1:7500" target="_blank" rel="noopener">http://127.0.0.1:7500</a> è¿›å…¥ frp æ§åˆ¶é¢æ¿ï¼Œå¦‚ä¸‹<br><img src="/images/1046366-20180927105622574-1652030646.png" alt=""><br><img src="/images/1046366-20180927105631267-34167117.png" alt=""><br>æ­¤æ—¶é€šè¿‡ ssh <a href="mailto:root@127.0.0.1" target="_blank" rel="noopener">root@127.0.0.1</a> -p 8081 å³å¯sshåˆ°gitlabï¼Œé€šè¿‡è®¿é—®http://gitlab.xxxx.com:8080 å³å¯è®¿é—®gitlabæœåŠ¡</p><h1>å…­ã€GitLabé€šè¿‡frpä»£ç†</h1><p>é€šè¿‡ä¸Šè¿°é…ç½®ï¼Œç¡®å®å¯ä»¥é€šè¿‡ <a href="http://gitlab.xxxx.com:8080" target="_blank" rel="noopener">http://gitlab.xxxx.com:8080</a> è®¿é—®gitlabæœåŠ¡,ä½†æ˜¯ä½ ä¼šå‘ç°ç¼ºå°‘é™æ€æ–‡ä»¶,å› ä¸ºgitlabçš„é™æ€æ–‡ä»¶æ˜¯nginxä»£ç†çš„ï¼Œèµ°çš„tcpåè®®,éœ€è¦ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="æ–¹æ¡ˆä¸€-ä½¿ç”¨frpçš„static-fileçš„æ’ä»¶">æ–¹æ¡ˆä¸€ã€ä½¿ç”¨frpçš„static_fileçš„æ’ä»¶</h2><p>è™½ç„¶å¯ä»¥æˆåŠŸï¼Œé€šè¿‡ <a href="http://127.0.0.1:8082" target="_blank" rel="noopener">http://127.0.0.1:8082</a> å³å¯è®¿é—®gitlabçš„é™æ€æ–‡ä»¶ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥é€šè¿‡nginxåå‘ä»£ç†åˆ°gitlab.xxxx.comè¿™ä¸ªåŸŸåä¸Šï¼Œä½†æ˜¯é€Ÿåº¦ä¼šå¾ˆæ…¢å¾ˆæ…¢,nginxé…ç½®å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server &#123;                                                                                                                                                                                                    </span><br><span class="line">    listen  80; </span><br><span class="line">    server_name  gitlab.xxxx.com;</span><br><span class="line">    location / &#123; </span><br><span class="line">        proxy_pass http://gitlab.xxxx.com:8080;</span><br><span class="line">    &#125;   </span><br><span class="line">    location /assets &#123;</span><br><span class="line">        proxy_pass http://127.0.0.1:8082;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–¹æ¡ˆäºŒ-å°†gitlabé™æ€æ–‡ä»¶ç§»è‡³æœåŠ¡å™¨ä¸Š-ç”¨nginxä»£ç†">æ–¹æ¡ˆäºŒã€å°†gitlabé™æ€æ–‡ä»¶ç§»è‡³æœåŠ¡å™¨ä¸Šï¼Œç”¨nginxä»£ç†</h2><p>gitlabé™æ€æ–‡ä»¶åœ¨å¦‚ä¸‹ä½ç½®<code>/opt/gitlab/embedded/service/gitlab-rails/public/assets/</code>æ”¾è‡³æœåŠ¡å™¨ï¼Œå¹¶é…ç½®nginxå¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server &#123;                                                                                                                                                                                                    </span><br><span class="line">    listen  80;</span><br><span class="line">    server_name  gitlab.xxxx.com;</span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://gitlab.xxxx.com:8080;</span><br><span class="line">    &#125;</span><br><span class="line">    location /assets &#123;</span><br><span class="line">        alias /webapps/gitlab/public/assets;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å³å¯é€šè¿‡ <a href="http://gitlab.xxxx.com" target="_blank" rel="noopener">http://gitlab.xxxx.com</a> æ­£å¸¸è®¿é—®å†…ç½‘çš„gitlabäº†</p><p>ä½†æ˜¯è¿™æ ·è¿˜æ²¡ç»“æŸï¼Œä½ ä¼šå‘ç°å¤–ç½‘é€šè¿‡git clone <a href="http://gitlab.xxxx.com/zhuqian/licaishi.git" target="_blank" rel="noopener">http://gitlab.xxxx.com/zhuqian/licaishi.git</a> ,æ ¹æœ¬æ²¡æ³•æ­£å¸¸å…‹éš†ä»“åº“ï¼Œé‚£æœ‰å•¥ç”¨å•Šï¼Œåˆ«æ€¥ï¼Œå’‹ä»¬è¿˜å¯ä»¥ç”¨sshæ–¹å¼å•Šã€‚</p><p>ä¸Šé¢æˆ‘ä»¬å·²ç»é…ç½®gitlabçš„22ç«¯å£æ˜ å°„åˆ°æœåŠ¡å™¨çš„8081ç«¯å£äº†ï¼Œæ‰€ä»¥å¯ä»¥è¿™æ ·å…‹éš†:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone ssh://git@127.0.0.1:8081/zhuqian/licaishi.git</span><br><span class="line"># æˆ–è€…</span><br><span class="line">git clone ssh://git@gitlab.xxxx.com:8081/zhuqian/licaishi.git</span><br></pre></td></tr></table></figure><p>å¯¹äºpip installçš„è¯ï¼Œå¯ä»¥è¿™æ ·ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install git+ssh://git@127.0.0.1:8081/zhuqian/algorithm.git</span><br><span class="line"># æˆ–è€…</span><br><span class="line">pip install git+ssh://git@gitlab.xxxx.com:8081/zhuqian/algorithm.git</span><br></pre></td></tr></table></figure><p>ä½ ä»¥ä¸ºå°±è¿™æ ·å®Œäº†ï¼Œè¿˜æ²¡æœ‰ï¼Œæˆ‘ä»¬æƒ³è¦ç›´æ¥èƒ½åœ¨gitlabé¡¹ç›®é¦–é¡µç›´æ¥èƒ½å¤Ÿæ˜¾ç¤ºgitè®¿é—®æ–¹æ³•ï¼Œæ•ˆæœå¦‚ä¸‹:<br><img src="/images/1046366-20180927105727421-1721871308.png" alt=""></p><p>è¦å®ç°æ­¤æ•ˆæœï¼Œåªéœ€é…ç½®ä¸‹<code>/etc/gitlab/gitlab.rb</code>å³å¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">external_url &apos;http://gitlab.xxxx.com&apos;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">gitlab_rails[&apos;gitlab_shell_ssh_port&apos;] = 8081</span><br><span class="line">...</span><br></pre></td></tr></table></figure><blockquote><blockquote><p>å¦å¤–éœ€è¦æ³¨æ„ä¸‹<code>nginx['listen_addresses'] = ['192.168.10.60']</code>ï¼Œéœ€è¦å¯¹åº”åˆ°æœ¬åœ°çš„ipåœ°å€</p></blockquote></blockquote><p>é…ç½®å®Œä¹‹å:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl reconfigure</span><br></pre></td></tr></table></figure><p>ç„¶åé€šè¿‡åŸŸåè®¿é—®gitlabå³å¯å®ç°ä¸Šè¿°æ•ˆæœäº†ï¼Œåªä¸è¿‡httpæ–¹å¼ç›®å‰è¿˜æ— æ³•è§£å†³ã€‚</p><h1>ä¸ƒã€ç”±mtuå¼•èµ·çš„æ— æ³•è®¿é—®çš„é—®é¢˜</h1><p>å¦‚æœfrpçš„adminç•Œé¢ä¸€åˆ‡æ­£å¸¸ï¼Œä½†æ˜¯å°±æ˜¯æ— æ³•è·å–æ•°æ®</p><p><img src="/images/1046366-20180927105741148-1074788234.png" alt=""></p><p>é‚£ä¹ˆææœ‰å¯èƒ½æ˜¯ä½ æœ¬åœ°çš„ç½‘ç»œæœ€å¤§åˆ†ç‰‡å°äºæœåŠ¡å™¨çš„æœ€å¤§åˆ†ç‰‡ï¼Œå¯¼è‡´æ•°æ®æ— æ³•å‘é€å‡ºå»,è§£å†³åŠæ³•æ˜¯å‡å°æœåŠ¡å™¨çš„mtu:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ifconfig eth0 mtu 1000 up</span><br></pre></td></tr></table></figure><p>å…¶ä»–ä¿®æ”¹mtuçš„æ–¹å¼è¯·è‡ªè¡Œgoogleã€‚</p><h1>å…«ã€References:</h1><ol><li><a href="https://mritd.me/2017/01/21/use-frp-for-internal-network-wear/" target="_blank" rel="noopener">åˆ©ç”¨ frp è¿›è¡Œå†…ç½‘ç©¿é€</a></li></ol>]]></content>
    
    <summary type="html">
    
      ç®€å•åœ°è¯´ï¼Œå†…ç½‘ç©¿é€ä¾èµ–äº NAT åŸç†ï¼Œæ ¹æ® NAT è®¾å¤‡ä¸åŒå¤§è‡´å¯åˆ†ä¸ºä»¥ä¸‹ 4 å¤§ç±»(å‰3ç§NATç±»å‹å¯ç»Ÿç§°ä¸ºconeç±»å‹)
    
    </summary>
    
      <category term="å†…ç½‘ç©¿é€" scheme="http://blog.breakering.com/categories/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/"/>
    
    
  </entry>
  
</feed>
